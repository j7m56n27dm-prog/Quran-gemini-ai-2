<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Qur'onIQ Premium - Qur'on Hifzi Platformasi</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Amiri:wght@400;700&family=Noto+Naskh+Arabic:wght@400;600;700&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #1e7b4a;
            --primary-light: #2a9f64;
            --primary-dark: #0d5a2f;
            --accent: #d4a574;
            --accent-light: #e8c4a0;
            --accent-dark: #8b6f47;
            
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            
            --bg: #f8f6f3;
            --bg-alt: #ede9e5;
            --surface: #ffffff;
            --text: #1a1a1a;
            --text-secondary: #555555;
            --text-muted: #888888;
            --border: #ddd7d1;
            
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
            --shadow-lg: 0 16px 50px rgba(0,0,0,0.12);
            --shadow-xl: 0 25px 60px rgba(0,0,0,0.18);
            --glow: 0 0 60px rgba(30,123,74,0.2);
            --glow-gold: 0 0 60px rgba(212,165,116,0.25);
            
            --radius: 24px;
            --radius-sm: 14px;
            --radius-xs: 10px;
            
            --font: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-ar: 'Noto Naskh Arabic', 'Amiri', serif;
            --font-quran: 'Amiri Quran', 'Amiri', serif;
            
            --transition: cubic-bezier(0.34, 1.56, 0.64, 1);
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg: #0a0f14;
            --bg-alt: #141c24;
            --surface: #1c2630;
            --text: #f5f5f5;
            --text-secondary: #b8b8b8;
            --text-muted: #707070;
            --border: #2a3642;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: background 0.5s var(--transition-smooth), color 0.3s;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        /* === BACKGROUND EFFECTS === */
        .bg-container {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .bg-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: floatOrb 25s ease-in-out infinite;
        }

        .bg-orb-1 {
            top: -20%;
            right: -10%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(30,123,74,0.3) 0%, transparent 70%);
            animation-delay: 0s;
        }

        .bg-orb-2 {
            bottom: -30%;
            left: -20%;
            width: 700px;
            height: 700px;
            background: radial-gradient(circle, rgba(212,165,116,0.25) 0%, transparent 70%);
            animation-delay: -8s;
        }

        .bg-orb-3 {
            top: 40%;
            left: 50%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(30,123,74,0.15) 0%, transparent 70%);
            animation-delay: -15s;
        }

        @keyframes floatOrb {
            0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
            25% { transform: translate(40px, -50px) scale(1.1) rotate(90deg); }
            50% { transform: translate(-30px, 60px) scale(0.9) rotate(180deg); }
            75% { transform: translate(50px, 30px) scale(1.05) rotate(270deg); }
        }

        .pattern-overlay {
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0.015;
            background-image: url("image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231e7b4a' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* === APP CONTAINER === */
        .app {
            max-width: 520px;
            margin: 0 auto;
            padding: 16px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* === HEADER === */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0 28px;
            position: relative;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            transition: transform 0.4s var(--transition);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo:active {
            transform: scale(0.95);
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 35px rgba(30,123,74,0.35), var(--glow);
            position: relative;
            overflow: hidden;
            font-size: 1.6rem;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 30%, rgba(255,255,255,0.4) 50%, transparent 70%);
            transform: translateX(-100%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 60%, 100% { transform: translateX(-100%); }
            30% { transform: translateX(100%); }
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .logo-text b {
            font-weight: 900;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .select-lang, .btn-theme {
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            font-family: var(--font);
            transition: all 0.3s var(--transition);
            box-shadow: var(--shadow);
        }

        .select-lang {
            appearance: none;
            background-image: url("image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23666' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 34px;
        }

        .select-lang:hover, .btn-theme:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg), var(--glow);
        }

        .select-lang:active, .btn-theme:active {
            transform: translateY(-1px) scale(0.97);
        }

        .btn-theme {
            width: 44px;
            height: 44px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        /* === PAGES === */
        .page {
            display: none;
            flex: 1;
        }

        .page.active {
            display: flex;
            flex-direction: column;
            animation: pageSlideIn 0.7s var(--transition);
        }

        @keyframes pageSlideIn {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.96);
                filter: blur(8px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        /* === CARDS === */
        .card {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 32px 26px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.4s var(--transition), box-shadow 0.4s;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary-light), var(--accent-light), var(--primary));
            background-size: 300% 100%;
            animation: gradientFlow 5s ease infinite;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* === HERO SECTION === */
        .hero {
            text-align: center;
            padding: 16px 0;
        }

        .hero-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, rgba(30,123,74,0.12) 0%, rgba(212,165,116,0.12) 100%);
            border: 3px solid var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            box-shadow: 0 20px 60px rgba(30,123,74,0.25), var(--glow), inset 0 0 50px rgba(30,123,74,0.08);
            animation: heroFloat 4s ease-in-out infinite;
            position: relative;
        }

        .hero-icon::before {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            border: 2px solid var(--primary-light);
            opacity: 0;
            animation: ringPulse 2s ease-out infinite;
        }

        .hero-icon::after {
            content: '';
            position: absolute;
            inset: -20px;
            border-radius: 50%;
            border: 1.5px solid var(--accent);
            opacity: 0;
            animation: ringPulse 2.5s ease-out infinite 0.3s;
        }

        @keyframes heroFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-18px) scale(1.03); }
        }

        @keyframes ringPulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .hero-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
            max-width: 320px;
            margin: 0 auto;
            line-height: 1.7;
        }

        /* === SCORE BOX === */
        .score-box {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
            border-radius: var(--radius-sm);
            padding: 28px;
            margin: 28px 0;
            text-align: center;
            border: 2px solid var(--primary-light);
            box-shadow: 0 15px 50px rgba(30,123,74,0.35), inset 0 0 40px rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
            color: white;
        }

        .score-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 60%);
            animation: rotateBg 12s linear infinite;
        }

        @keyframes rotateBg {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .score-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .score-value {
            font-size: 3.5rem;
            font-weight: 900;
            position: relative;
            z-index: 1;
            text-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* === BUTTONS === */
        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            font-family: var(--font);
            cursor: pointer;
            transition: all 0.4s var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 500px;
            height: 500px;
        }

        .btn:active {
            transform: scale(0.94);
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 10px 35px rgba(30,123,74,0.4);
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            transform: translateX(-100%);
            animation: btnShimmer 2.5s ease-in-out infinite;
        }

        @keyframes btnShimmer {
            0%, 60%, 100% { transform: translateX(-100%); }
            30% { transform: translateX(100%); }
        }

        .btn-primary:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 18px 50px rgba(30,123,74,0.5);
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: white;
            box-shadow: 0 10px 35px rgba(212,165,116,0.4);
        }

        .btn-gold::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            transform: translateX(-100%);
            animation: btnShimmer 2.5s ease-in-out infinite;
        }

        .btn-gold:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 18px 50px rgba(212,165,116,0.5);
        }

        .btn-outline {
            background: var(--surface);
            color: var(--text);
            border: 2px solid var(--border);
            box-shadow: var(--shadow);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 14px;
        }

        .btn-ghost:hover {
            color: var(--primary);
            background: var(--bg-alt);
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .btn-icon {
            font-size: 1.25rem;
        }

        /* === SECTION TITLES === */
        .section-title {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .section-title span:first-child {
            font-size: 1.8rem;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.15) rotate(-8deg); }
            75% { transform: scale(1.1) rotate(8deg); }
        }

        /* === SETTINGS === */
        .setting-group {
            margin-bottom: 26px;
        }

        .setting-label {
            font-size: 0.78rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-label::before {
            content: '';
            width: 4px;
            height: 18px;
            background: linear-gradient(180deg, var(--primary), var(--accent));
            border-radius: 4px;
        }

        /* === PILLS === */
        .pills {
            display: flex;
            gap: 10px;
        }

        .pill {
            flex: 1;
            padding: 14px 12px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            font-weight: 600;
            font-size: 0.88rem;
            font-family: var(--font);
            cursor: pointer;
            transition: all 0.35s var(--transition);
            text-align: center;
        }

        .pill:hover {
            border-color: var(--primary-light);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .pill:active {
            transform: translateY(-2px) scale(0.97);
        }

        .pill.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 8px 30px rgba(30,123,74,0.4);
            transform: scale(1.03);
            animation: pillPop 0.5s var(--transition);
        }

        @keyframes pillPop {
            0% { transform: scale(1); }
            40% { transform: scale(1.12) rotate(-3deg); }
            100% { transform: scale(1.03) rotate(0deg); }
        }

        /* === TYPE CARDS === */
        .type-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .type-card {
            padding: 22px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.4s var(--transition);
            text-align: center;
        }

        .type-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-6px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .type-card:active {
            transform: translateY(-3px) scale(0.98);
        }

        .type-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(30,123,74,0.08) 0%, rgba(212,165,116,0.05) 100%);
            box-shadow: var(--shadow-lg), var(--glow);
            animation: cardActivate 0.6s var(--transition);
        }

        @keyframes cardActivate {
            0% { transform: scale(1) rotate(0deg); }
            30% { transform: scale(1.08) rotate(-4deg); }
            60% { transform: scale(1.04) rotate(2deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .type-icon {
            font-size: 2.2rem;
            margin-bottom: 12px;
            transition: transform 0.4s var(--transition);
        }

        .type-card:hover .type-icon,
        .type-card.active .type-icon {
            transform: scale(1.2) rotate(10deg);
        }

        .type-name {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 6px;
        }

        .type-desc {
            font-size: 0.78rem;
            color: var(--text-muted);
        }

        /* === JUZ GRID === */
        .juz-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            max-height: 250px;
            overflow-y: auto;
            padding: 6px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--bg-alt);
        }

        .juz-item {
            aspect-ratio: 1;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--surface);
            color: var(--text);
            font-weight: 700;
            font-size: 0.9rem;
            font-family: var(--font);
            cursor: pointer;
            transition: all 0.35s var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .juz-item:hover {
            border-color: var(--primary);
            transform: scale(1.12) rotate(5deg);
            box-shadow: 0 10px 30px rgba(30,123,74,0.3);
            z-index: 2;
        }

        .juz-item:active {
            transform: scale(1.05) rotate(0deg);
        }

        .juz-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 10px 35px rgba(30,123,74,0.45);
            animation: juzPop 0.6s var(--transition);
        }

        @keyframes juzPop {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.25) rotate(-10deg); }
            50% { transform: scale(1.15) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        /* === SHEIKH GRID === */
        .sheikh-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .sheikh-card {
            padding: 18px 12px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.4s var(--transition);
            text-align: center;
        }

        .sheikh-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .sheikh-card:active {
            transform: translateY(-2px) scale(0.97);
        }

        .sheikh-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(30,123,74,0.08) 0%, rgba(212,165,116,0.05) 100%);
            box-shadow: var(--shadow-lg), var(--glow);
            animation: sheikhActivate 0.5s var(--transition);
        }

        @keyframes sheikhActivate {
            0% { transform: scale(1); }
            50% { transform: scale(1.08) rotate(-3deg); }
            100% { transform: scale(1); }
        }

        .sheikh-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-alt);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: all 0.4s var(--transition);
        }

        .sheikh-card.active .sheikh-avatar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 8px 25px rgba(30,123,74,0.35);
        }

        .sheikh-name {
            font-weight: 600;
            font-size: 0.82rem;
            color: var(--text);
        }

        /* === DIVIDER === */
        .divider {
            display: flex;
            align-items: center;
            gap: 14px;
            margin: 20px 0;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .divider::before, .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border), transparent);
        }

        /* === QUIZ PAGE === */
        .quiz-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
        }

        .quiz-counter {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .quiz-badge {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            padding: 10px 16px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-radius: 25px;
            box-shadow: 0 6px 20px rgba(30,123,74,0.3);
        }

        /* === PROGRESS BAR === */
        .progress {
            height: 10px;
            background: var(--bg-alt);
            border-radius: 10px;
            margin-bottom: 22px;
            overflow: hidden;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary-light));
            background-size: 200% 100%;
            border-radius: 10px;
            transition: width 0.6s var(--transition);
            animation: progressShimmer 2s ease infinite;
            position: relative;
        }

        @keyframes progressShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* === QUESTION === */
        .question {
            text-align: center;
            margin-bottom: 18px;
        }

        .question-text {
            font-size: 1.08rem;
            font-weight: 600;
            color: var(--text);
            line-height: 1.7;
        }

        /* === AYAH BOX === */
        .ayah-box {
            margin: 22px 0;
            padding: 28px 20px;
            background: linear-gradient(135deg, rgba(30,123,74,0.06) 0%, rgba(212,165,116,0.04) 100%);
            border-radius: var(--radius);
            border: 2px solid rgba(30,123,74,0.15);
            position: relative;
            overflow: hidden;
        }

        .ayah-box::before {
            content: '‚ú¶';
            position: absolute;
            top: 12px;
            right: 16px;
            font-size: 1.5rem;
            color: var(--primary-light);
            opacity: 0.35;
            animation: starRotate 20s linear infinite;
        }

        .ayah-box::after {
            content: '‚ú¶';
            position: absolute;
            bottom: 12px;
            left: 16px;
            font-size: 1.2rem;
            color: var(--accent);
            opacity: 0.35;
            animation: starRotate 25s linear infinite reverse;
        }

        @keyframes starRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .ayah-text {
            font-family: var(--font-quran);
            font-size: 2rem;
            line-height: 2.6;
            text-align: center;
            color: var(--text);
            direction: rtl;
            position: relative;
            z-index: 1;
        }

        .ayah-ref {
            text-align: center;
            margin-top: 14px;
            font-size: 0.88rem;
            color: var(--text-muted);
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        /* === AUDIO BOX === */
        .audio-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            padding: 32px;
            margin: 22px 0;
            background: linear-gradient(135deg, var(--bg-alt) 0%, var(--bg) 100%);
            border-radius: var(--radius);
            border: 2px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .audio-box::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, rgba(30,123,74,0.08) 0%, transparent 70%);
            animation: audioPulse 4s ease-in-out infinite;
        }

        @keyframes audioPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .play-btn {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            font-size: 2.2rem;
            cursor: pointer;
            box-shadow: 0 15px 50px rgba(30,123,74,0.45), var(--glow);
            transition: all 0.4s var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .play-btn::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            border: 3px solid var(--primary-light);
            opacity: 0;
            animation: playRing 1.5s ease-out infinite;
        }

        .play-btn::after {
            content: '';
            position: absolute;
            inset: -16px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            opacity: 0;
            animation: playRing 1.8s ease-out infinite 0.2s;
        }

        @keyframes playRing {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.4); opacity: 0; }
        }

        .play-btn:hover {
            transform: scale(1.12);
            box-shadow: 0 20px 60px rgba(30,123,74,0.55), 0 0 80px rgba(30,123,74,0.3);
        }

        .play-btn:active {
            transform: scale(1);
        }

        .play-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            box-shadow: var(--shadow);
        }

        .play-btn.loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .play-btn.playing {
            animation: playPulse 1s ease-in-out infinite;
        }

        @keyframes playPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .audio-status {
            font-size: 0.92rem;
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        /* === OPTIONS === */
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.35s var(--transition);
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .option:hover:not(.disabled) {
            border-color: var(--primary-light);
            transform: translateX(8px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .option:active:not(.disabled) {
            transform: translateX(4px) scale(0.99);
        }

        .option-letter {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-alt) 0%, var(--bg) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.92rem;
            color: var(--text-secondary);
            flex-shrink: 0;
            transition: all 0.35s var(--transition);
        }

        .option-text {
            flex: 1;
            font-weight: 500;
            font-size: 0.98rem;
            color: var(--text);
        }

        .option.arabic .option-text {
            font-family: var(--font-ar);
            font-size: 1.35rem;
            text-align: right;
            direction: rtl;
            line-height: 2;
        }

        .option.correct {
            background: linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(16,185,129,0.08) 100%);
            border-color: var(--success);
            animation: correctBounce 0.6s var(--transition);
        }

        .option.correct .option-letter {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(16,185,129,0.4);
            animation: letterPop 0.5s var(--transition);
        }

        @keyframes correctBounce {
            0% { transform: scale(1); }
            30% { transform: scale(1.04) translateX(5px); }
            100% { transform: scale(1); }
        }

        @keyframes letterPop {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.3) rotate(15deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .option.wrong {
            background: linear-gradient(135deg, rgba(239,68,68,0.15) 0%, rgba(239,68,68,0.08) 100%);
            border-color: var(--error);
            animation: wrongShake 0.5s ease-out;
        }

        .option.wrong .option-letter {
            background: linear-gradient(135deg, var(--error) 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(239,68,68,0.4);
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-12px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-8px); }
            80% { transform: translateX(6px); }
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.55;
        }

        /* === HIKMAT BOX === */
        .hikmat {
            margin-top: 24px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(212,165,116,0.15) 0%, rgba(212,165,116,0.08) 100%);
            border-radius: var(--radius-sm);
            border: 2px solid rgba(212,165,116,0.3);
            display: none;
            position: relative;
            overflow: hidden;
        }

        .hikmat::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: hikmatGlow 5s ease-in-out infinite;
        }

        @keyframes hikmatGlow {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .hikmat.show {
            display: block;
            animation: hikmatReveal 0.7s var(--transition);
        }

        @keyframes hikmatReveal {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            50% {
                transform: translateY(-5px) scale(1.02);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .hikmat-title {
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--accent-dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .hikmat-text {
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .hikmat-source {
            margin-top: 10px;
            font-size: 0.78rem;
            color: var(--text-muted);
            font-style: italic;
            position: relative;
            z-index: 1;
        }

        /* === QUIZ ACTIONS === */
        .quiz-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .quiz-actions .btn {
            flex: 1;
        }

        .btn-next {
            display: none;
        }

        .btn-next.show {
            display: flex;
            animation: btnSlideIn 0.5s var(--transition);
        }

        @keyframes btnSlideIn {
            0% {
                opacity: 0;
                transform: translateX(30px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        /* === RESULT PAGE === */
        .result {
            text-align: center;
            padding: 16px 0;
        }

        .result-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            margin: 0 auto 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: resultAppear 1s var(--transition), resultFloat 4s ease-in-out infinite 1s;
        }

        @keyframes resultAppear {
            0% {
                transform: scale(0) rotate(-270deg);
                opacity: 0;
            }
            60% {
                transform: scale(1.1) rotate(20deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes resultFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.03); }
        }

        .result-circle::before {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            border: 3px dashed currentColor;
            opacity: 0.6;
            animation: rotateDash 10s linear infinite;
        }

        .result-circle::after {
            content: '';
            position: absolute;
            inset: -20px;
            border-radius: 50%;
            border: 2px solid currentColor;
            opacity: 0.3;
            animation: rotateDash 12s linear infinite reverse;
        }

        @keyframes rotateDash {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .result-circle.excellent {
            background: linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(16,185,129,0.08) 100%);
            color: var(--success);
            border: 4px solid var(--success);
            box-shadow: 0 0 60px rgba(16,185,129,0.4);
        }

        .result-circle.good {
            background: linear-gradient(135deg, rgba(212,165,116,0.15) 0%, rgba(212,165,116,0.08) 100%);
            color: var(--accent);
            border: 4px solid var(--accent);
            box-shadow: 0 0 60px rgba(212,165,116,0.4);
        }

        .result-circle.poor {
            background: linear-gradient(135deg, rgba(239,68,68,0.15) 0%, rgba(239,68,68,0.08) 100%);
            color: var(--error);
            border: 4px solid var(--error);
            box-shadow: 0 0 60px rgba(239,68,68,0.4);
        }

        .result-score {
            font-size: 3.2rem;
            font-weight: 900;
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 22px;
        }

        .result-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
            margin-bottom: 22px;
        }

        .stat {
            padding: 18px;
            border-radius: var(--radius-sm);
            text-align: center;
            border: 2px solid var(--border);
            transition: all 0.4s var(--transition);
            animation: statAppear 0.6s var(--transition) backwards;
        }

        .stat:nth-child(1) { animation-delay: 0.2s; }
        .stat:nth-child(2) { animation-delay: 0.35s; }

        @keyframes statAppear {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .stat.success {
            background: linear-gradient(135deg, rgba(16,185,129,0.12) 0%, rgba(16,185,129,0.06) 100%);
            border-color: var(--success);
        }

        .stat.error {
            background: linear-gradient(135deg, rgba(239,68,68,0.12) 0%, rgba(239,68,68,0.06) 100%);
            border-color: var(--error);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
        }

        .stat.success .stat-value { color: var(--success); }
        .stat.error .stat-value { color: var(--error); }

        .stat-label {
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .result-msg {
            font-size: 0.98rem;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 24px;
            padding: 18px;
            background: var(--bg-alt);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
            animation: msgSlide 0.7s var(--transition) 0.5s backwards;
        }

        @keyframes msgSlide {
            0% {
                opacity: 0;
                transform: translateX(-20px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* === ADVICE PAGE === */
        .advice-list {
            list-style: none;
        }

        .advice-item {
            padding: 18px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 16px;
            align-items: flex-start;
            animation: adviceSlide 0.6s var(--transition) backwards;
        }

        .advice-item:nth-child(1) { animation-delay: 0.1s; }
        .advice-item:nth-child(2) { animation-delay: 0.18s; }
        .advice-item:nth-child(3) { animation-delay: 0.26s; }
        .advice-item:nth-child(4) { animation-delay: 0.34s; }
        .advice-item:nth-child(5) { animation-delay: 0.42s; }

        @keyframes adviceSlide {
            0% {
                opacity: 0;
                transform: translateX(-25px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .advice-item:last-child {
            border-bottom: none;
        }

        .advice-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, rgba(30,123,74,0.12) 0%, rgba(212,165,116,0.12) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
            border: 2px solid var(--primary-light);
            animation: iconFloat 3s ease-in-out infinite;
        }

        .advice-item:nth-child(2) .advice-icon { animation-delay: 0.5s; }
        .advice-item:nth-child(3) .advice-icon { animation-delay: 1s; }
        .advice-item:nth-child(4) .advice-icon { animation-delay: 1.5s; }
        .advice-item:nth-child(5) .advice-icon { animation-delay: 2s; }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-6px) scale(1.08); }
        }

        .advice-content {
            flex: 1;
        }

        .advice-title {
            font-weight: 700;
            font-size: 0.98rem;
            color: var(--text);
            margin-bottom: 5px;
        }

        .advice-desc {
            font-size: 0.88rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* === FOOTER === */
        .footer {
            margin-top: auto;
            padding: 24px 0;
            text-align: center;
        }

        .footer-text {
            font-size: 0.82rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .footer-text b {
            color: var(--primary);
            font-weight: 700;
        }

        /* === LOADER === */
        .loader-overlay {
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(15px);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
            z-index: 1000;
        }

        [data-theme="dark"] .loader-overlay {
            background: rgba(10,15,20,0.95);
        }

        .loader-overlay.show {
            display: flex;
            animation: loaderFadeIn 0.3s ease;
        }

        @keyframes loaderFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .loader-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.9s linear infinite;
        }

        .loader-text {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* === UTILITIES === */
        .hidden { display: none !important; }
        .mt-14 { margin-top: 14px; }
        .mt-18 { margin-top: 18px; }

        /* === RESPONSIVE === */
        @media (max-width: 400px) {
            .logo-text { font-size: 1.3rem; }
            .hero-title { font-size: 1.7rem; }
            .ayah-text { font-size: 1.7rem; }
            .option.arabic .option-text { font-size: 1.2rem; }
            .juz-grid { grid-template-columns: repeat(5, 1fr); }
            .result-circle { width: 150px; height: 150px; }
            .result-score { font-size: 2.6rem; }
        }
    </style>
</head>
<body data-theme="light">
    <!-- Background Effects -->
    <div class="bg-container">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>
    <div class="pattern-overlay"></div>

    <!-- Loader -->
    <div class="loader-overlay" id="loader">
        <div class="loader-spinner"></div>
        <div class="loader-text" id="loaderText">Yuklanmoqda...</div>
    </div>

    <!-- App Container -->
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo" onclick="App.go('home')">
                <div class="logo-icon">üìñ</div>
                <div class="logo-text">Qur'on<b>IQ</b></div>
            </div>
            <div class="header-actions">
                <select class="select-lang" id="langSelect" onchange="App.setLanguage(this.value)">
                    <option value="uz">O'zbek</option>
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    <option value="en">English</option>
                </select>
                <button class="btn-theme" id="themeBtn" onclick="App.toggleTheme()">üåô</button>
            </div>
        </header>

        <!-- HOME PAGE -->
        <main id="pageHome" class="page active">
            <div class="card">
                <div class="hero">
                    <div class="hero-icon">üìñ</div>
                    <h1 class="hero-title" id="heroTitle">Xush kelibsiz!</h1>
                    <p class="hero-subtitle" id="heroSubtitle">Qur'on hifzini mustahkamlash va bilimingizni sinash uchun mukammal platforma</p>
                    <div class="score-box">
                        <div class="score-label" id="scoreLabel">Eng yuqori natija</div>
                        <div class="score-value" id="highScore">0%</div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="App.go('textSettings')">
                        <span class="btn-icon">üìù</span>
                        <span id="btnText">Matnli test</span>
                    </button>
                    <button class="btn btn-gold" onclick="App.go('audioSettings')">
                        <span class="btn-icon">üéß</span>
                        <span id="btnAudio">Audio test</span>
                    </button>
                    <button class="btn btn-outline" onclick="App.go('advice')">
                        <span class="btn-icon">üí°</span>
                        <span id="btnAdvice">Maslahatlar</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- TEXT SETTINGS PAGE -->
        <section id="pageTextSettings" class="page">
            <div class="card">
                <h2 class="section-title"><span>üìù</span> <span id="textSettingsTitle">Matnli test</span></h2>

                <div class="setting-group">
                    <div class="setting-label" id="labelType">Test turi</div>
                    <div class="type-grid">
                        <div class="type-card active" data-type="continue" onclick="App.setTextType('continue')">
                            <div class="type-icon">‚û°Ô∏è</div>
                            <div class="type-name" id="typeContinue">Oyat davomi</div>
                            <div class="type-desc" id="typeContinueDesc">Keyingi oyatni toping</div>
                        </div>
                        <div class="type-card" data-type="surah" onclick="App.setTextType('surah')">
                            <div class="type-icon">üîç</div>
                            <div class="type-name" id="typeSurah">Surani toping</div>
                            <div class="type-desc" id="typeSurahDesc">Qaysi suradan?</div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelDiff">Qiyinchilik darajasi</div>
                    <div class="pills">
                        <button class="pill" data-d="easy" onclick="App.setDiff('easy')" id="diffEasy">Oson</button>
                        <button class="pill active" data-d="medium" onclick="App.setDiff('medium')" id="diffMedium">O'rta</button>
                        <button class="pill" data-d="hard" onclick="App.setDiff('hard')" id="diffHard">Qiyin</button>
                    </div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelSource">Manba tanlang</div>
                    <button class="btn btn-primary" onclick="App.startQuiz('text')">
                        <span>üìö</span>
                        <span id="btnFullQuran">30-juzdan boshlash</span>
                    </button>
                    <div class="divider" id="dividerOr">yoki juz tanlang</div>
                    <div class="juz-grid" id="juzGrid"></div>
                </div>

                <button class="btn btn-ghost mt-14" onclick="App.go('home')">
                    <span>‚Üê</span>
                    <span id="btnBack">Ortga qaytish</span>
                </button>
            </div>
        </section>

        <!-- AUDIO SETTINGS PAGE -->
        <section id="pageAudioSettings" class="page">
            <div class="card">
                <h2 class="section-title"><span>üéß</span> <span id="audioSettingsTitle">Audio test</span></h2>

                <div class="setting-group">
                    <div class="setting-label" id="labelSheikh">Qorini tanlang</div>
                    <div class="sheikh-grid" id="sheikhGrid"></div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelAudioType">Test turi</div>
                    <div class="type-grid">
                        <div class="type-card active" data-atype="surah" onclick="App.setAudioType('surah')">
                            <div class="type-icon">üîç</div>
                            <div class="type-name" id="audioTypeSurah">Surani toping</div>
                            <div class="type-desc" id="audioTypeSurahDesc">Eshitib aniqlang</div>
                        </div>
                        <div class="type-card" data-atype="continue" onclick="App.setAudioType('continue')">
                            <div class="type-icon">‚û°Ô∏è</div>
                            <div class="type-name" id="audioTypeContinue">Oyat davomi</div>
                            <div class="type-desc" id="audioTypeContinueDesc">Keyingisini toping</div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-gold mt-18" onclick="App.startQuiz('audio')">
                    <span>üéµ</span>
                    <span id="btnStartAudio">Testni boshlash</span>
                </button>

                <button class="btn btn-ghost mt-14" onclick="App.go('home')">
                    <span>‚Üê</span>
                    <span id="btnBack2">Ortga qaytish</span>
                </button>
            </div>
        </section>

        <!-- QUIZ PAGE -->
        <section id="pageQuiz" class="page">
            <div class="card">
                <div class="quiz-top">
                    <span class="quiz-counter" id="quizCounter">1 / 10</span>
                    <span class="quiz-badge" id="quizBadge">TEST</span>
                </div>

                <div class="progress">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>

                <div class="question">
                    <p class="question-text" id="questionText">Savol...</p>
                </div>

                <div class="ayah-box hidden" id="ayahBox">
                    <div class="ayah-text" id="ayahText"></div>
                    <div class="ayah-ref" id="ayahRef"></div>
                </div>

                <div class="audio-box hidden" id="audioBox">
                    <button class="play-btn" id="playBtn" onclick="App.playAudio()">‚ñ∂Ô∏è</button>
                    <span class="audio-status" id="audioStatus">Tinglash uchun bosing</span>
                </div>

                <div class="options" id="optionsList"></div>

                <div class="hikmat" id="hikmat">
                    <div class="hikmat-title">‚ú® <span id="hikmatLabel">Qur'oniy hikmat</span></div>
                    <p class="hikmat-text" id="hikmatText"></p>
                    <p class="hikmat-source" id="hikmatSource"></p>
                </div>

                <div class="quiz-actions">
                    <button class="btn btn-outline" onclick="App.exitQuiz()" style="flex:0.45">
                        <span id="btnExit">Chiqish</span>
                    </button>
                    <button class="btn btn-primary btn-next" id="btnNext" onclick="App.nextQuestion()">
                        <span id="btnNextText">Keyingisi</span>
                        <span>‚Üí</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- RESULT PAGE -->
        <section id="pageResult" class="page">
            <div class="card">
                <div class="result">
                    <div class="result-circle" id="resultCircle">
                        <span class="result-score" id="resultScore">0%</span>
                    </div>
                    <h2 class="result-title" id="resultTitle">Natija</h2>
                    <div class="result-stats">
                        <div class="stat success">
                            <div class="stat-value" id="resultCorrect">0</div>
                            <div class="stat-label" id="labelCorrect">To'g'ri</div>
                        </div>
                        <div class="stat error">
                            <div class="stat-value" id="resultWrong">0</div>
                            <div class="stat-label" id="labelWrong">Xato</div>
                        </div>
                    </div>
                    <p class="result-msg" id="resultMsg"></p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="App.restart()">
                            <span>üîÑ</span>
                            <span id="btnRetry">Qayta urinish</span>
                        </button>
                        <button class="btn btn-outline" onclick="App.go('home')">
                            <span>üè†</span>
                            <span id="btnHome">Bosh sahifa</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ADVICE PAGE -->
        <section id="pageAdvice" class="page">
            <div class="card">
                <h2 class="section-title"><span>üí°</span> <span id="adviceTitle">Foydali maslahatlar</span></h2>
                <ul class="advice-list" id="adviceList"></ul>
                <button class="btn btn-ghost mt-18" onclick="App.go('home')">
                    <span>‚Üê</span>
                    <span id="btnBack3">Ortga qaytish</span>
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p class="footer-text">¬©Ô∏è <b>Muhammad Daler Qori</b> tomonidan yasalgan</p>
        </footer>
    </div>

    <script>
        // === TRANSLATIONS ===
        const T = {
            uz: {
                heroTitle: "Xush kelibsiz!",
                heroSubtitle: "Qur'on hifzini mustahkamlash va bilimingizni sinash uchun mukammal platforma",
                scoreLabel: "Eng yuqori natija",
                btnText: "Matnli test",
                btnAudio: "Audio test",
                btnAdvice: "Maslahatlar",
                textSettingsTitle: "Matnli test",
                audioSettingsTitle: "Audio test",
                labelType: "Test turi",
                labelAudioType: "Test turi",
                labelDiff: "Qiyinchilik darajasi",
                labelSource: "Manba tanlang",
                labelSheikh: "Qorini tanlang",
                typeContinue: "Oyat davomi",
                typeContinueDesc: "Keyingi oyatni toping",
                typeSurah: "Surani toping",
                typeSurahDesc: "Qaysi suradan?",
                audioTypeSurah: "Surani toping",
                audioTypeSurahDesc: "Eshitib aniqlang",
                audioTypeContinue: "Oyat davomi",
                audioTypeContinueDesc: "Keyingisini toping",
                diffEasy: "Oson",
                diffMedium: "O'rta",
                diffHard: "Qiyin",
                btnFullQuran: "30-juzdan boshlash",
                dividerOr: "yoki juz tanlang",
                btnStartAudio: "Testni boshlash",
                btnBack: "Ortga qaytish",
                btnExit: "Chiqish",
                btnNextText: "Keyingisi",
                btnRetry: "Qayta urinish",
                btnHome: "Bosh sahifa",
                adviceTitle: "Foydali maslahatlar",
                hikmatLabel: "Qur'oniy hikmat",
                resultTitle: "Natija",
                labelCorrect: "To'g'ri",
                labelWrong: "Xato",
                loading: "Yuklanmoqda...",
                tapToPlay: "Tinglash uchun bosing",
                playing: "Ijro etilmoqda...",
                loadingAudio: "Audio yuklanmoqda...",
                audioError: "Audio yuklanmadi",
                questionContinue: "Quyidagi oyatdan keyin qaysi oyat keladi?",
                questionSurah: "Bu oyat qaysi suradan olingan?",
                questionAudioSurah: "Bu qaysi sura?",
                questionAudioContinue: "Eshitgan oyatdan keyin qaysi oyat keladi?",
                modeContinue: "OYAT DAVOMI",
                modeSurah: "SURANI TOPING",
                modeAudioSurah: "AUDIO SURA",
                modeAudioContinue: "AUDIO DAVOM",
                resultPerfect: "üåü MashaAlloh! Mukammal natija! Siz haqiqatan ham Qur'on ahlidasiz!",
                resultGreat: "‚ú® Barakalloh! Juda yaxshi natija! Biroz ko'proq takrorlash bilan mukammallikka erishasiz!",
                resultGood: "üëç Yaxshi harakat! Har kuni takrorlash orqali yuqorilarga ko'tarilasiz!",
                resultFail: "üí™ G'ayrat qiling! Sabr bilan davom eting. Alloh sabrlilarni sevadi.",
                advice: [
                    {icon:"üéØ", title:"Ixlos", desc:"Qur'onni faqat Allohning roziligi uchun yodlang, dunyo va shuhrat uchun emas."},
                    {icon:"üìù", title:"Mutashabihlar", desc:"O'xshash oyatlarni yaxshi bilib oling, ularning farqlarini eslab qoling."},
                    {icon:"üê¢", title:"Tartil", desc:"Tez yodlashdan ko'ra, sifatli yodlang. Sabr bilan o'qing, xato qilmang."},
                    {icon:"üîÑ", title:"Takror", desc:"Har kuni namozdan keyin Qur'onni takrorlang. Amalda mustahkamlanadi."},
                    {icon:"ü§≤", title:"Istig'for", desc:"Gunohlardan tavba qiling, ular Qur'onni xotiradan o'chiradi."}
                ]
            },
            ar: {
                heroTitle: "ÿ£ŸáŸÑÿßŸã Ÿàÿ≥ŸáŸÑÿßŸã!",
                heroSubtitle: "ŸÖŸÜÿµÿ© ŸÑÿ™ÿπÿ≤Ÿäÿ≤ ÿ≠ŸÅÿ∏ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸàÿßÿÆÿ™ÿ®ÿßÿ± ŸÖÿπÿ±ŸÅÿ™ŸÉ",
                scoreLabel: "ÿ£ÿπŸÑŸâ ŸÜÿ™Ÿäÿ¨ÿ©",
                btnText: "ÿßÿÆÿ™ÿ®ÿßÿ± ŸÜÿµŸä",
                btnAudio: "ÿßÿÆÿ™ÿ®ÿßÿ± ÿµŸàÿ™Ÿä",
                btnAdvice: "ŸÜÿµÿßÿ¶ÿ≠",
                textSettingsTitle: "ÿßÿÆÿ™ÿ®ÿßÿ± ŸÜÿµŸä",
                audioSettingsTitle: "ÿßÿÆÿ™ÿ®ÿßÿ± ÿµŸàÿ™Ÿä",
                labelType: "ŸÜŸàÿπ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±",
                labelAudioType: "ŸÜŸàÿπ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±",
                labelDiff: "ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿµÿπŸàÿ®ÿ©",
                labelSource: "ÿßŸÑŸÖÿµÿØÿ±",
                labelSheikh: "ÿßÿÆÿ™ÿ± ÿßŸÑŸÇÿßÿ±ÿ¶",
                typeContinue: "ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ¢Ÿäÿ©",
                typeContinueDesc: "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿ™ÿßŸÑŸäÿ©",
                typeSurah: "ÿ≠ÿØÿØ ÿßŸÑÿ≥Ÿàÿ±ÿ©",
                typeSurahDesc: "ŸÖŸÜ ÿ£Ÿä ÿ≥Ÿàÿ±ÿ©ÿü",
                audioTypeSurah: "ÿ≠ÿØÿØ ÿßŸÑÿ≥Ÿàÿ±ÿ©",
                audioTypeSurahDesc: "ÿßÿ≥ÿ™ŸÖÿπ Ÿàÿ≠ÿØÿØ",
                audioTypeContinue: "ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ¢Ÿäÿ©",
                audioTypeContinueDesc: "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿ™ÿßŸÑŸäÿ©",
                diffEasy: "ÿ≥ŸáŸÑ",
                diffMedium: "ŸÖÿ™Ÿàÿ≥ÿ∑",
                diffHard: "ÿµÿπÿ®",
                btnFullQuran: "ÿßÿ®ÿØÿ£ ŸÖŸÜ ÿßŸÑÿ¨ÿ≤ÿ° Ÿ£Ÿ†",
                dividerOr: "ÿ£Ÿà ÿßÿÆÿ™ÿ± ÿ¨ÿ≤ÿ°ÿßŸã",
                btnStartAudio: "ÿßÿ®ÿØÿ£ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±",
                btnBack: "ÿ±ÿ¨Ÿàÿπ",
                btnExit: "ÿÆÿ±Ÿàÿ¨",
                btnNextText: "ÿßŸÑÿ™ÿßŸÑŸä",
                btnRetry: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
                btnHome: "ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                adviceTitle: "ŸÜÿµÿßÿ¶ÿ≠ ŸÖŸÅŸäÿØÿ©",
                hikmatLabel: "ÿ≠ŸÉŸÖÿ© ŸÇÿ±ÿ¢ŸÜŸäÿ©",
                resultTitle: "ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©",
                labelCorrect: "ÿµÿ≠Ÿäÿ≠",
                labelWrong: "ÿÆÿ∑ÿ£",
                loading: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...",
                tapToPlay: "ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿßÿπ",
                playing: "Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ...",
                loadingAudio: "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ™...",
                audioError: "ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ™",
                questionContinue: "ŸÖÿß ÿßŸÑÿ¢Ÿäÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©ÿü",
                questionSurah: "ŸÖŸÜ ÿ£Ÿä ÿ≥Ÿàÿ±ÿ© Ÿáÿ∞Ÿá ÿßŸÑÿ¢Ÿäÿ©ÿü",
                questionAudioSurah: "ŸÖÿß Ÿáÿ∞Ÿá ÿßŸÑÿ≥Ÿàÿ±ÿ©ÿü",
                questionAudioContinue: "ŸÖÿß ÿßŸÑÿ¢Ÿäÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©ÿü",
                modeContinue: "ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ¢Ÿäÿ©",
                modeSurah: "ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ≥Ÿàÿ±ÿ©",
                modeAudioSurah: "ÿµŸàÿ™Ÿä - ÿ≥Ÿàÿ±ÿ©",
                modeAudioContinue: "ÿµŸàÿ™Ÿä - ÿ•ŸÉŸÖÿßŸÑ",
                resultPerfect: "üåü ŸÖÿß ÿ¥ÿßÿ° ÿßŸÑŸÑŸá! ŸÜÿ™Ÿäÿ¨ÿ© ŸÖÿ´ÿßŸÑŸäÿ©! ÿ£ŸÜÿ™ ŸÖŸÜ ÿ£ŸáŸÑ ÿßŸÑŸÇÿ±ÿ¢ŸÜ!",
                resultGreat: "‚ú® ÿ®ÿßÿ±ŸÉ ÿßŸÑŸÑŸá ŸÅŸäŸÉ! ŸÜÿ™Ÿäÿ¨ÿ© ŸÖŸÖÿ™ÿßÿ≤ÿ©!",
                resultGood: "üëç ÿ¨ŸäÿØ! ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸäŸàŸÖŸäÿ© ÿ≥ÿ™ÿ±ŸÅÿπ ŸÖÿ≥ÿ™ŸàÿßŸÉ!",
                resultFail: "üí™ ÿßÿ¨ÿ™ŸáÿØ! ÿßÿ≥ÿ™ŸÖÿ± ÿ®ÿµÿ®ÿ±. ÿßŸÑŸÑŸá ŸÖÿπ ÿßŸÑÿµÿßÿ®ÿ±ŸäŸÜ.",
                advice: [
                    {icon:"üéØ", title:"ÿßŸÑÿ•ÿÆŸÑÿßÿµ", desc:"ÿßÿ≠ŸÅÿ∏ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿÆÿßŸÑÿµÿßŸã ŸÑŸÑŸáÿå ŸÑÿß ŸÑŸÑÿØŸÜŸäÿß ŸàŸÑÿß ŸÑŸÑÿ≥ŸÖÿπÿ©."},
                    {icon:"üìù", title:"ÿßŸÑŸÖÿ™ÿ¥ÿßÿ®Ÿáÿßÿ™", desc:"ÿßÿπÿ±ŸÅ ÿßŸÑÿ¢Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ÿ¥ÿßÿ®Ÿáÿ© ŸàŸÅÿ±ŸàŸÇÿßÿ™Ÿáÿß ÿ¨ŸäÿØÿßŸã."},
                    {icon:"üê¢", title:"ÿßŸÑÿ™ÿ±ÿ™ŸäŸÑ", desc:"ÿßŸÑÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿ™ŸÇŸÜ ÿÆŸäÿ± ŸÖŸÜ ÿßŸÑÿ≥ÿ±ÿπÿ© ŸÖÿπ ÿßŸÑÿÆÿ∑ÿ£."},
                    {icon:"üîÑ", title:"ÿßŸÑÿ™ŸÉÿ±ÿßÿ±", desc:"ÿ±ÿßÿ¨ÿπ ÿ≠ŸÅÿ∏ŸÉ ŸäŸàŸÖŸäÿßŸã ÿ®ÿπÿØ ÿßŸÑÿµŸÑŸàÿßÿ™."},
                    {icon:"ü§≤", title:"ÿßŸÑÿßÿ≥ÿ™ÿ∫ŸÅÿßÿ±", desc:"ÿßÿ≥ÿ™ÿ∫ŸÅÿ± ŸÖŸÜ ÿßŸÑÿ∞ŸÜŸàÿ® ŸÅÿ•ŸÜŸáÿß ÿ™ŸèŸÜÿ≥Ÿä ÿßŸÑŸÇÿ±ÿ¢ŸÜ."}
                ]
            },
            ru: {
                heroTitle: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
                heroSubtitle: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ö–∏—Ñ–∑–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π",
                scoreLabel: "–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
                btnText: "–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ç–µ—Å—Ç",
                btnAudio: "–ê—É–¥–∏–æ —Ç–µ—Å—Ç",
                btnAdvice: "–°–æ–≤–µ—Ç—ã",
                textSettingsTitle: "–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ç–µ—Å—Ç",
                audioSettingsTitle: "–ê—É–¥–∏–æ —Ç–µ—Å—Ç",
                labelType: "–¢–∏–ø —Ç–µ—Å—Ç–∞",
                labelAudioType: "–¢–∏–ø —Ç–µ—Å—Ç–∞",
                labelDiff: "–°–ª–æ–∂–Ω–æ—Å—Ç—å",
                labelSource: "–ò—Å—Ç–æ—á–Ω–∏–∫",
                labelSheikh: "–í—ã–±–µ—Ä–∏—Ç–µ —á—Ç–µ—Ü–∞",
                typeContinue: "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∞—è—Ç–∞",
                typeContinueDesc: "–ù–∞–π–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π",
                typeSurah: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—É—Ä—É",
                typeSurahDesc: "–ò–∑ –∫–∞–∫–æ–π —Å—É—Ä—ã?",
                audioTypeSurah: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—É—Ä—É",
                audioTypeSurahDesc: "–°–ª—É—à–∞–π—Ç–µ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ",
                audioTypeContinue: "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∞—è—Ç–∞",
                audioTypeContinueDesc: "–ù–∞–π–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π",
                diffEasy: "–õ–µ–≥–∫–∏–π",
                diffMedium: "–°—Ä–µ–¥–Ω–∏–π",
                diffHard: "–°–ª–æ–∂–Ω—ã–π",
                btnFullQuran: "–ù–∞—á–∞—Ç—å —Å –î–∂—É–∑–∞ 30",
                dividerOr: "–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∂—É–∑",
                btnStartAudio: "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç",
                btnBack: "–ù–∞–∑–∞–¥",
                btnExit: "–í—ã—Ö–æ–¥",
                btnNextText: "–î–∞–ª–µ–µ",
                btnRetry: "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞",
                btnHome: "–ì–ª–∞–≤–Ω–∞—è",
                adviceTitle: "–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã",
                hikmatLabel: "–ö–æ—Ä–∞–Ω–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç",
                resultTitle: "–†–µ–∑—É–ª—å—Ç–∞—Ç",
                labelCorrect: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ",
                labelWrong: "–û—à–∏–±–∫–∏",
                loading: "–ó–∞–≥—Ä—É–∑–∫–∞...",
                tapToPlay: "–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è",
                playing: "–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è...",
                loadingAudio: "–ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ...",
                audioError: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",
                questionContinue: "–ö–∞–∫–æ–π –∞—è—Ç —Å–ª–µ–¥—É–µ—Ç –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ?",
                questionSurah: "–ò–∑ –∫–∞–∫–æ–π —Å—É—Ä—ã —ç—Ç–æ—Ç –∞—è—Ç?",
                questionAudioSurah: "–ö–∞–∫–∞—è —ç—Ç–æ —Å—É—Ä–∞?",
                questionAudioContinue: "–ö–∞–∫–æ–π –∞—è—Ç —Å–ª–µ–¥—É–µ—Ç –ø–æ—Å–ª–µ?",
                modeContinue: "–ü–†–û–î–û–õ–ñ–ï–ù–ò–ï",
                modeSurah: "–û–ü–†–ï–î–ï–õ–ò–¢–¨ –°–£–†–£",
                modeAudioSurah: "–ê–£–î–ò–û - –°–£–†–ê",
                modeAudioContinue: "–ê–£–î–ò–û - –ü–†–û–î–û–õ–ñ.",
                resultPerfect: "üåü –ú–∞—à–∞–ê–ª–ª–∞—Ö! –ò–¥–µ–∞–ª—å–Ω–æ! –í—ã –∏—Å—Ç–∏–Ω–Ω—ã–π –∑–Ω–∞—Ç–æ–∫ –ö–æ—Ä–∞–Ω–∞!",
                resultGreat: "‚ú® –ë–∞—Ä–∞–∫–∞–õ–ª–∞—Ö! –û—Ç–ª–∏—á–Ω–æ!",
                resultGood: "üëç –•–æ—Ä–æ—à–æ! –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ–±–∑–æ—Ä –ø–æ–¥–Ω–∏–º–µ—Ç –≤–∞—Å –≤—ã—à–µ!",
                resultFail: "üí™ –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å —Ç–µ—Ä–ø–µ–Ω–∏–µ–º.",
                advice: [
                    {icon:"üéØ", title:"–ò—Ö–ª–∞—Å", desc:"–£—á–∏—Ç–µ –ö–æ—Ä–∞–Ω —Ç–æ–ª—å–∫–æ —Ä–∞–¥–∏ –ê–ª–ª–∞—Ö–∞, –Ω–µ –¥–ª—è —Å–ª–∞–≤—ã."},
                    {icon:"üìù", title:"–ú—É—Ç–∞—à–∞–±–∏—Ö–∞—Ç", desc:"–ó–Ω–∞–π—Ç–µ –ø–æ—Ö–æ–∂–∏–µ –∞—è—Ç—ã –∏ –∏—Ö —Ä–∞–∑–ª–∏—á–∏—è."},
                    {icon:"üê¢", title:"–¢–∞—Ä—Ç–∏–ª—å", desc:"–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞—É—á–∏–≤–∞–Ω–∏–µ –ª—É—á—à–µ –±—ã—Å—Ç—Ä–æ–≥–æ."},
                    {icon:"üîÑ", title:"–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ", desc:"–ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –ö–æ—Ä–∞–Ω –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø–æ—Å–ª–µ –º–æ–ª–∏—Ç–≤."},
                    {icon:"ü§≤", title:"–ò—Å—Ç–∏–≥—Ñ–∞—Ä", desc:"–ü—Ä–æ—Å–∏—Ç–µ –ø—Ä–æ—â–µ–Ω–∏—è, –≥—Ä–µ—Ö–∏ —Å—Ç–∏—Ä–∞—é—Ç –ø–∞–º—è—Ç—å."}
                ]
            },
            en: {
                heroTitle: "Welcome!",
                heroSubtitle: "Platform to strengthen Quran memorization and test your knowledge",
                scoreLabel: "High Score",
                btnText: "Text Test",
                btnAudio: "Audio Test",
                btnAdvice: "Advice",
                textSettingsTitle: "Text Test",
                audioSettingsTitle: "Audio Test",
                labelType: "Test Type",
                labelAudioType: "Test Type",
                labelDiff: "Difficulty",
                labelSource: "Source",
                labelSheikh: "Select Reciter",
                typeContinue: "Continue Ayah",
                typeContinueDesc: "Find the next one",
                typeSurah: "Identify Surah",
                typeSurahDesc: "Which surah?",
                audioTypeSurah: "Identify Surah",
                audioTypeSurahDesc: "Listen and identify",
                audioTypeContinue: "Continue Ayah",
                audioTypeContinueDesc: "Find the next one",
                diffEasy: "Easy",
                diffMedium: "Medium",
                diffHard: "Hard",
                btnFullQuran: "Start from Juz 30",
                dividerOr: "or select a juz",
                btnStartAudio: "Start Test",
                btnBack: "Go Back",
                btnExit: "Exit",
                btnNextText: "Next",
                btnRetry: "Try Again",
                btnHome: "Home",
                adviceTitle: "Helpful Advice",
                hikmatLabel: "Quranic Wisdom",
                resultTitle: "Result",
                labelCorrect: "Correct",
                labelWrong: "Wrong",
                loading: "Loading...",
                tapToPlay: "Tap to play",
                playing: "Playing...",
                loadingAudio: "Loading audio...",
                audioError: "Audio failed to load",
                questionContinue: "Which verse comes after this?",
                questionSurah: "Which surah is this verse from?",
                questionAudioSurah: "Which surah is this?",
                questionAudioContinue: "Which verse follows?",
                modeContinue: "CONTINUE AYAH",
                modeSurah: "IDENTIFY SURAH",
                modeAudioSurah: "AUDIO - SURAH",
                modeAudioContinue: "AUDIO - CONTINUE",
                resultPerfect: "üåü MashaAllah! Perfect! You are truly among the people of Quran!",
                resultGreat: "‚ú® BarakAllah! Excellent!",
                resultGood: "üëç Good! Daily review will elevate you!",
                resultFail: "üí™ Keep trying! Continue with patience.",
                advice: [
                    {icon:"üéØ", title:"Ikhlas", desc:"Memorize Quran solely for Allah, not for fame."},
                    {icon:"üìù", title:"Mutashabihat", desc:"Know similar verses and their differences well."},
                    {icon:"üê¢", title:"Tartil", desc:"Quality memorization is better than speed."},
                    {icon:"üîÑ", title:"Repetition", desc:"Review your Quran daily after prayers."},
                    {icon:"ü§≤", title:"Istighfar", desc:"Ask forgiveness, sins erase memory."}
                ]
            }
        };

        // === HIKMAT (WISDOM) ===
        const HIKMAT = {
            uz: [
                {text:"Qur'on ahli - Allohning xos bandalari va yaqinlaridur.", source:"Hadis"},
                {text:"Eng yaxshilaringiz Qur'onni o'rganib, o'rgatganlardir.", source:"Hadis"},
                {text:"Qur'onni qayta-qayta takrorlang, u tuyadan tezroq unutiladi.", source:"Hadis"},
                {text:"Kim Qur'on o'qisa va unga amal qilsa, ota-onasiga toj kiydiriladi.", source:"Hadis"},
                {text:"Qalblar zanglanadi, uni tozalash Qur'on tilovatidadir.", source:"Hadis"},
                {text:"Qur'on sizning foyda yoki ziyoningizga hujjat bo'ladi.", source:"Hadis"},
                {text:"Meni eslanglar, Men ham sizlarni eslayman.", source:"Qur'on, 2:152"},
                {text:"Sabr qilganlarga cheksiz ajr beriladi.", source:"Qur'on, 39:10"}
            ],
            ar: [
                {text:"ÿ£ŸáŸÑ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸáŸÖ ÿ£ŸáŸÑ ÿßŸÑŸÑŸá ŸàÿÆÿßÿµÿ™Ÿá.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ÿÆŸäÿ±ŸÉŸÖ ŸÖŸÜ ÿ™ÿπŸÑŸÖ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸàÿπŸÑŸÖŸá.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ÿ™ÿπÿßŸáÿØŸàÿß ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸÅÿ•ŸÜŸá ÿ£ÿ¥ÿØ ÿ™ŸÅÿµŸäÿßŸã ŸÖŸÜ ÿßŸÑÿ•ÿ®ŸÑ.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ŸÖŸÜ ŸÇÿ±ÿ£ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸàÿπŸÖŸÑ ÿ®Ÿá ÿ£ŸÑÿ®ÿ≥ ŸàÿßŸÑÿØÿßŸá ÿ™ÿßÿ¨ÿßŸã.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ÿßŸÑŸÇŸÑŸàÿ® ÿ™ÿµÿØÿ£ Ÿàÿ¨ŸÑÿßÿ§Ÿáÿß ÿ™ŸÑÿßŸàÿ© ÿßŸÑŸÇÿ±ÿ¢ŸÜ.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿ≠ÿ¨ÿ© ŸÑŸÉ ÿ£Ÿà ÿπŸÑŸäŸÉ.", source:"ÿ≠ÿØŸäÿ´"},
                {text:"ŸÅÿßÿ∞ŸÉÿ±ŸàŸÜŸä ÿ£ÿ∞ŸÉÿ±ŸÉŸÖ.", source:"ÿßŸÑŸÇÿ±ÿ¢ŸÜ Ÿ¢:Ÿ°Ÿ•Ÿ¢"},
                {text:"ÿ•ŸÜŸÖÿß ŸäŸàŸÅŸâ ÿßŸÑÿµÿßÿ®ÿ±ŸàŸÜ ÿ£ÿ¨ÿ±ŸáŸÖ ÿ®ÿ∫Ÿäÿ± ÿ≠ÿ≥ÿßÿ®.", source:"ÿßŸÑŸÇÿ±ÿ¢ŸÜ Ÿ£Ÿ©:Ÿ°Ÿ†"}
            ],
            ru: [
                {text:"–õ—é–¥–∏ –ö–æ—Ä–∞–Ω–∞ - –ª—é–¥–∏ –ê–ª–ª–∞—Ö–∞ –∏ –ï–≥–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ.", source:"–•–∞–¥–∏—Å"},
                {text:"–õ—É—á—à–∏–µ –∏–∑ –≤–∞—Å - —Ç–µ, –∫—Ç–æ —É—á–∏—Ç –ö–æ—Ä–∞–Ω –∏ –æ–±—É—á–∞–µ—Ç –µ–º—É.", source:"–•–∞–¥–∏—Å"},
                {text:"–ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –ö–æ—Ä–∞–Ω, –æ–Ω –∑–∞–±—ã–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –≤–µ—Ä–±–ª—é–¥–∞.", source:"–•–∞–¥–∏—Å"},
                {text:"–ö—Ç–æ —á–∏—Ç–∞–µ—Ç –ö–æ—Ä–∞–Ω –∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø–æ –Ω–µ–º—É, –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è–º –Ω–∞–¥–µ–Ω—É—Ç –∫–æ—Ä–æ–Ω—É.", source:"–•–∞–¥–∏—Å"},
                {text:"–°–µ—Ä–¥—Ü–∞ —Ä–∂–∞–≤–µ—é—Ç, –∏—Ö –ø–æ–ª–∏—Ä—É–µ—Ç —á—Ç–µ–Ω–∏–µ –ö–æ—Ä–∞–Ω–∞.", source:"–•–∞–¥–∏—Å"},
                {text:"–ö–æ—Ä–∞–Ω - –¥–æ–≤–æ–¥ –∑–∞ —Ç–µ–±—è –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤ —Ç–µ–±—è.", source:"–•–∞–¥–∏—Å"},
                {text:"–ü–æ–º–∏–Ω–∞–π—Ç–µ –ú–µ–Ω—è, –∏ –Ø –±—É–¥—É –ø–æ–º–Ω–∏—Ç—å –æ –≤–∞—Å.", source:"–ö–æ—Ä–∞–Ω 2:152"},
                {text:"–¢–µ—Ä–ø–µ–ª–∏–≤—ã–º –≤–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ —Å—á—ë—Ç–∞.", source:"–ö–æ—Ä–∞–Ω 39:10"}
            ],
            en: [
                {text:"People of Quran are people of Allah and His special servants.", source:"Hadith"},
                {text:"The best of you are those who learn and teach the Quran.", source:"Hadith"},
                {text:"Review the Quran regularly, it escapes faster than a camel.", source:"Hadith"},
                {text:"Who reads and acts upon the Quran, his parents will be crowned.", source:"Hadith"},
                {text:"Hearts rust, and the Quran polishes them.", source:"Hadith"},
                {text:"The Quran is a proof for you or against you.", source:"Hadith"},
                {text:"Remember Me, I will remember you.", source:"Quran 2:152"},
                {text:"The patient will be given their reward without account.", source:"Quran 39:10"}
            ]
        };

        // === SURAHS DATA (Juz 30) ===
        const SURAHS = [
            {num:78, name:"An-Naba", ar:"ÿßŸÑŸÜÿ®ÿ£", ayahs:40, start:5672},
            {num:79, name:"An-Naziat", ar:"ÿßŸÑŸÜÿßÿ≤ÿπÿßÿ™", ayahs:46, start:5712},
            {num:80, name:"Abasa", ar:"ÿπÿ®ÿ≥", ayahs:42, start:5758},
            {num:81, name:"At-Takwir", ar:"ÿßŸÑÿ™ŸÉŸàŸäÿ±", ayahs:29, start:5800},
            {num:82, name:"Al-Infitar", ar:"ÿßŸÑÿßŸÜŸÅÿ∑ÿßÿ±", ayahs:19, start:5829},
            {num:83, name:"Al-Mutaffifin", ar:"ÿßŸÑŸÖÿ∑ŸÅŸÅŸäŸÜ", ayahs:36, start:5848},
            {num:84, name:"Al-Inshiqaq", ar:"ÿßŸÑÿßŸÜÿ¥ŸÇÿßŸÇ", ayahs:25, start:5884},
            {num:85, name:"Al-Buruj", ar:"ÿßŸÑÿ®ÿ±Ÿàÿ¨", ayahs:22, start:5909},
            {num:86, name:"At-Tariq", ar:"ÿßŸÑÿ∑ÿßÿ±ŸÇ", ayahs:17, start:5931},
            {num:87, name:"Al-Ala", ar:"ÿßŸÑÿ£ÿπŸÑŸâ", ayahs:19, start:5948},
            {num:88, name:"Al-Ghashiyah", ar:"ÿßŸÑÿ∫ÿßÿ¥Ÿäÿ©", ayahs:26, start:5967},
            {num:89, name:"Al-Fajr", ar:"ÿßŸÑŸÅÿ¨ÿ±", ayahs:30, start:5993},
            {num:90, name:"Al-Balad", ar:"ÿßŸÑÿ®ŸÑÿØ", ayahs:20, start:6023},
            {num:91, name:"Ash-Shams", ar:"ÿßŸÑÿ¥ŸÖÿ≥", ayahs:15, start:6043},
            {num:92, name:"Al-Layl", ar:"ÿßŸÑŸÑŸäŸÑ", ayahs:21, start:6058},
            {num:93, name:"Ad-Duha", ar:"ÿßŸÑÿ∂ÿ≠Ÿâ", ayahs:11, start:6079},
            {num:94, name:"Ash-Sharh", ar:"ÿßŸÑÿ¥ÿ±ÿ≠", ayahs:8, start:6090},
            {num:95, name:"At-Tin", ar:"ÿßŸÑÿ™ŸäŸÜ", ayahs:8, start:6098},
            {num:96, name:"Al-Alaq", ar:"ÿßŸÑÿπŸÑŸÇ", ayahs:19, start:6106},
            {num:97, name:"Al-Qadr", ar:"ÿßŸÑŸÇÿØÿ±", ayahs:5, start:6125},
            {num:98, name:"Al-Bayyinah", ar:"ÿßŸÑÿ®ŸäŸÜÿ©", ayahs:8, start:6130},
            {num:99, name:"Az-Zalzalah", ar:"ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©", ayahs:8, start:6138},
            {num:100, name:"Al-Adiyat", ar:"ÿßŸÑÿπÿßÿØŸäÿßÿ™", ayahs:11, start:6146},
            {num:101, name:"Al-Qariah", ar:"ÿßŸÑŸÇÿßÿ±ÿπÿ©", ayahs:11, start:6157},
            {num:102, name:"At-Takathur", ar:"ÿßŸÑÿ™ŸÉÿßÿ´ÿ±", ayahs:8, start:6168},
            {num:103, name:"Al-Asr", ar:"ÿßŸÑÿπÿµÿ±", ayahs:3, start:6176},
            {num:104, name:"Al-Humazah", ar:"ÿßŸÑŸáŸÖÿ≤ÿ©", ayahs:9, start:6179},
            {num:105, name:"Al-Fil", ar:"ÿßŸÑŸÅŸäŸÑ", ayahs:5, start:6188},
            {num:106, name:"Quraysh", ar:"ŸÇÿ±Ÿäÿ¥", ayahs:4, start:6193},
            {num:107, name:"Al-Maun", ar:"ÿßŸÑŸÖÿßÿπŸàŸÜ", ayahs:7, start:6197},
            {num:108, name:"Al-Kawthar", ar:"ÿßŸÑŸÉŸàÿ´ÿ±", ayahs:3, start:6204},
            {num:109, name:"Al-Kafirun", ar:"ÿßŸÑŸÉÿßŸÅÿ±ŸàŸÜ", ayahs:6, start:6207},
            {num:110, name:"An-Nasr", ar:"ÿßŸÑŸÜÿµÿ±", ayahs:3, start:6213},
            {num:111, name:"Al-Masad", ar:"ÿßŸÑŸÖÿ≥ÿØ", ayahs:5, start:6216},
            {num:112, name:"Al-Ikhlas", ar:"ÿßŸÑÿ•ÿÆŸÑÿßÿµ", ayahs:4, start:6221},
            {num:113, name:"Al-Falaq", ar:"ÿßŸÑŸÅŸÑŸÇ", ayahs:5, start:6225},
            {num:114, name:"An-Nas", ar:"ÿßŸÑŸÜÿßÿ≥", ayahs:6, start:6230}
        ];

        // === SHEIKHS DATA ===
        const SHEIKHS = [
            {id:"alafasy", name:"Al-Afasy", api:"ar.alafasy", emoji:"üéôÔ∏è"},
            {id:"husary", name:"Al-Husary", api:"ar.husary", emoji:"üìø"},
            {id:"minshawi", name:"Al-Minshawi", api:"ar.minshawi", emoji:"üåô"}
        ];

        // === MAIN APP ===
        const App = {
            lang: "uz",
            theme: "light",
            diff: "medium",
            textType: "continue",
            audioType: "surah",
            sheikh: SHEIKHS[0],
            questions: [],
            index: 0,
            score: 0,
            total: 10,
            answered: false,
            highScore: 0,
            audio: null,
            mode: null,
            cache: {},

            // Initialize App
            init() {
                this.lang = localStorage.getItem("qiq_lang") || "uz";
                this.theme = localStorage.getItem("qiq_theme") || "light";
                this.highScore = parseInt(localStorage.getItem("qiq_high") || "0");

                document.body.dataset.theme = this.theme;
                document.getElementById("langSelect").value = this.lang;
                document.getElementById("themeBtn").textContent = this.theme === "dark" ? "‚òÄÔ∏è" : "üåô";
                document.getElementById("highScore").textContent = this.highScore + "%";

                if (this.lang === "ar") document.body.style.direction = "rtl";

                this.translate();
                this.renderJuz();
                this.renderSheikhs();
                this.renderAdvice();

                console.log("‚úÖ Qur'onIQ Premium initialized!");
            },

            // Get translation
            t(key) {
                return T[this.lang]?.[key] || key;
            },

            // Apply translations
            translate() {
                const keys = Object.keys(T[this.lang]);
                keys.forEach(k => {
                    const el = document.getElementById(k);
                    if (el && typeof T[this.lang][k] === 'string') {
                        el.textContent = T[this.lang][k];
                    }
                });
            },

            // Set language
            setLanguage(lang) {
                this.lang = lang;
                localStorage.setItem("qiq_lang", lang);
                document.body.style.direction = lang === "ar" ? "rtl" : "ltr";
                this.translate();
                this.renderAdvice();
            },

            // Toggle theme
            toggleTheme() {
                this.theme = this.theme === "light" ? "dark" : "light";
                document.body.dataset.theme = this.theme;
                document.getElementById("themeBtn").textContent = this.theme === "dark" ? "‚òÄÔ∏è" : "üåô";
                localStorage.setItem("qiq_theme", this.theme);
            },

            // Navigate to page
            go(page) {
                document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
                const map = {
                    home: "pageHome",
                    textSettings: "pageTextSettings",
                    audioSettings: "pageAudioSettings",
                    quiz: "pageQuiz",
                    result: "pageResult",
                    advice: "pageAdvice"
                };
                document.getElementById(map[page])?.classList.add("active");
                window.scrollTo({top: 0, behavior: "smooth"});
            },

            // Set text type
            setTextType(type) {
                this.textType = type;
                document.querySelectorAll("[data-type]").forEach(c => {
                    c.classList.toggle("active", c.dataset.type === type);
                });
            },

            // Set audio type
            setAudioType(type) {
                this.audioType = type;
                document.querySelectorAll("[data-atype]").forEach(c => {
                    c.classList.toggle("active", c.dataset.atype === type);
                });
            },

            // Set difficulty
            setDiff(d) {
                this.diff = d;
                document.querySelectorAll("[data-d]").forEach(p => {
                    p.classList.toggle("active", p.dataset.d === d);
                });
            },

            // Select sheikh
            selectSheikh(id) {
                this.sheikh = SHEIKHS.find(s => s.id === id) || SHEIKHS[0];
                document.querySelectorAll(".sheikh-card").forEach(c => {
                    c.classList.toggle("active", c.dataset.sid === id);
                });
            },

            // Render Juz buttons
            renderJuz() {
                const grid = document.getElementById("juzGrid");
                grid.innerHTML = "";
                for (let i = 1; i <= 30; i++) {
                    const btn = document.createElement("button");
                    btn.className = "juz-item";
                    btn.textContent = i;
                    btn.onclick = () => {
                        document.querySelectorAll(".juz-item").forEach(j => j.classList.remove("active"));
                        btn.classList.add("active");
                        setTimeout(() => this.startQuiz("text", i), 300);
                    };
                    grid.appendChild(btn);
                }
            },

            // Render Sheikh cards
            renderSheikhs() {
                const grid = document.getElementById("sheikhGrid");
                grid.innerHTML = "";
                SHEIKHS.forEach((s, i) => {
                    const card = document.createElement("div");
                    card.className = "sheikh-card" + (i === 0 ? " active" : "");
                    card.dataset.sid = s.id;
                    card.innerHTML = `<div class="sheikh-avatar">${s.emoji}</div><div class="sheikh-name">${s.name}</div>`;
                    card.onclick = () => this.selectSheikh(s.id);
                    grid.appendChild(card);
                });
            },

            // Render advice
            renderAdvice() {
                const list = document.getElementById("adviceList");
                const advice = T[this.lang]?.advice || T.uz.advice;
                list.innerHTML = advice.map(a => `
                    <li class="advice-item">
                        <div class="advice-icon">${a.icon}</div>
                        <div class="advice-content">
                            <div class="advice-title">${a.title}</div>
                            <div class="advice-desc">${a.desc}</div>
                        </div>
                    </li>
                `).join("");
            },

            // Fetch Ayah from API
            async fetchAyah(surah, ayah) {
                const key = `${surah}:${ayah}`;
                if (this.cache[key]) return this.cache[key];
                
                try {
                    const res = await fetch(`https://api.alquran.cloud/v1/ayah/${surah}:${ayah}`);
                    const data = await res.json();
                    if (data.code === 200) {
                        this.cache[key] = data.data;
                        return data.data;
                    }
                } catch (e) {
                    console.error("API Error:", e);
                }
                return null;
            },

            // Get audio URL
            getAudioUrl(globalNum) {
                return `https://cdn.islamic.network/quran/audio/128/${this.sheikh.api}/${globalNum}.mp3`;
            },

            // Shuffle array
            shuffle(arr) {
                const a = [...arr];
                for (let i = a.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [a[i], a[j]] = [a[j], a[i]];
                }
                return a;
            },

            // Generate questions
            async generateQuestions(mode) {
                const questions = [];
                const surahs = this.shuffle(SURAHS).slice(0, this.total + 5);

                for (const surah of surahs) {
                    if (questions.length >= this.total) break;

                    const maxAyah = mode === "continue" ? surah.ayahs - 1 : surah.ayahs;
                    if (maxAyah < 1) continue;
                    
                    const ayahNum = Math.floor(Math.random() * maxAyah) + 1;

                    try {
                        const current = await this.fetchAyah(surah.num, ayahNum);
                        if (!current) continue;

                        if (mode === "continue") {
                            const next = await this.fetchAyah(surah.num, ayahNum + 1);
                            if (!next) continue;

                            const wrongs = [];
                            const others = this.shuffle(SURAHS.filter(s => s.num !== surah.num)).slice(0, 5);
                            
                            for (const o of others) {
                                if (wrongs.length >= 3) break;
                                const wAyah = Math.floor(Math.random() * o.ayahs) + 1;
                                const w = await this.fetchAyah(o.num, wAyah);
                                if (w && w.text !== next.text) wrongs.push(w.text);
                            }

                            if (wrongs.length >= 3) {
                                const opts = this.shuffle([next.text, ...wrongs.slice(0, 3)]);
                                questions.push({
                                    type: "continue",
                                    surah: surah,
                                    ayahNum: ayahNum,
                                    ayahText: current.text,
                                    globalNum: current.number,
                                    correct: next.text,
                                    options: opts,
                                    correctIdx: opts.indexOf(next.text)
                                });
                            }
                        } else {
                            const others = this.shuffle(SURAHS.filter(s => s.num !== surah.num)).slice(0, 3);
                            const opts = this.shuffle([
                                {name: surah.name, ar: surah.ar},
                                ...others.map(s => ({name: s.name, ar: s.ar}))
                            ]);
                            questions.push({
                                type: "surah",
                                surah: surah,
                                ayahNum: ayahNum,
