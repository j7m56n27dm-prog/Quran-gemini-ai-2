<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Qur'onIQ Premium - Qur'on Hifzi Platformasi</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Amiri:wght@400;700&family=Noto+Naskh+Arabic:wght@400;600;700&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #1e7b4a;
            --primary-light: #2a9f64;
            --primary-dark: #0d5a2f;
            --accent: #d4a574;
            --accent-light: #e8c4a0;
            --accent-dark: #8b6f47;
            
            --success: #10b981;
            --error: #ef4444;
            
            --bg: #f5f3f0;
            --bg-alt: #ede9e5;
            --surface: #ffffff;
            --text: #1a1a1a;
            --text-secondary: #555555;
            --text-muted: #888888;
            --border: #ddd7d1;
            
            --shadow: 0 4px 16px rgba(0,0,0,0.08);
            --shadow-lg: 0 12px 40px rgba(0,0,0,0.12);
            --glow: 0 0 50px rgba(30,123,74,0.15);
            
            --radius: 20px;
            --radius-sm: 12px;
            
            --font: 'Poppins', sans-serif;
            --font-ar: 'Noto Naskh Arabic', 'Amiri', serif;
            --font-quran: 'Amiri Quran', 'Amiri', serif;
        }

        [data-theme="dark"] {
            --bg: #0f1419;
            --bg-alt: #1a2028;
            --surface: #242d38;
            --text: #f0f0f0;
            --text-secondary: #b0b0b0;
            --text-muted: #808080;
            --border: #3a4450;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        .bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
        }

        .bg::before {
            content: '';
            position: absolute;
            top: -40%;
            right: -30%;
            width: 120%;
            height: 160%;
            background: radial-gradient(ellipse 800px 600px at 70% 40%, rgba(30,123,74,0.12) 0%, transparent 70%);
            animation: floatOrb 20s ease-in-out infinite;
        }

        .bg::after {
            content: '';
            position: absolute;
            bottom: -50%;
            left: -40%;
            width: 130%;
            height: 150%;
            background: radial-gradient(ellipse 700px 700px at 20% 60%, rgba(212,165,116,0.1) 0%, transparent 70%);
            animation: floatOrb 25s ease-in-out infinite 2s;
        }

        @keyframes floatOrb {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.05); }
            50% { transform: translate(-20px, 40px) scale(0.95); }
            75% { transform: translate(40px, 20px) scale(1.08); }
        }

        .pattern {
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0.02;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(30,123,74,0.2) 0%, transparent 2%),
                radial-gradient(circle at 60% 70%, rgba(212,165,116,0.2) 0%, transparent 2%);
            background-size: 100px 100px;
            animation: patternShift 40s linear infinite;
        }

        @keyframes patternShift {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100px, 100px); }
        }

        .app {
            max-width: 540px;
            margin: 0 auto;
            padding: 16px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0 32px;
            position: relative;
            z-index: 10;
            animation: slideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 12px 40px rgba(30,123,74,0.3), var(--glow);
            position: relative;
            overflow: hidden;
            font-size: 2rem;
            color: white;
            font-family: var(--font-ar);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .logo:hover .logo-icon {
            transform: rotate(360deg) scale(1.1);
            box-shadow: 0 16px 50px rgba(30,123,74,0.5), var(--glow);
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.3) 40%, transparent 100%);
            animation: shimmerIcon 3s ease-in-out infinite;
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 20px;
            border: 2px solid var(--primary-light);
            opacity: 0;
            animation: pulseBorder 2s ease-out infinite;
        }

        @keyframes shimmerIcon {
            0%, 100% { transform: translateX(-100%) skewX(-20deg); }
            35% { transform: translateX(100%) skewX(-20deg); }
            100% { transform: translateX(100%) skewX(-20deg); }
        }

        @keyframes pulseBorder {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(1.3); }
        }

        .logo-text {
            font-size: 1.6rem;
            font-weight: 900;
            letter-spacing: -1px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .select-lang, .btn-theme {
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .select-lang::before, .btn-theme::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(30,123,74,0.2), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .select-lang:active::before, .btn-theme:active::before {
            width: 200px;
            height: 200px;
        }

        .select-lang {
            appearance: none;
            background-image: url("image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23555' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 32px;
        }

        .select-lang:hover, .btn-theme:hover {
            border-color: var(--primary);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 24px rgba(30,123,74,0.3);
        }

        .select-lang:active, .btn-theme:active {
            transform: translateY(0) scale(0.95);
        }

        .btn-theme {
            width: 44px;
            height: 44px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .btn-theme:active {
            animation: rotateClick 0.6s ease-out;
        }

        @keyframes rotateClick {
            0% { transform: rotate(0deg) scale(0.95); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .page {
            display: none;
            flex: 1;
        }

        .page.active {
            display: flex;
            flex-direction: column;
            animation: pageSlideIn 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes pageSlideIn {
            0% {
                opacity: 0;
                transform: translateX(100px) scale(0.9);
                filter: blur(10px);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
                filter: blur(0);
            }
        }

        .card {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 32px 28px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            animation: cardFloat 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes cardFloat {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary-light), var(--primary));
            background-size: 400% 100%;
            animation: gradientSlide 4s ease infinite;
        }

        .card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius);
            background: linear-gradient(135deg, rgba(30,123,74,0.03) 0%, transparent 100%);
            pointer-events: none;
        }

        @keyframes gradientSlide {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero {
            text-align: center;
            padding: 20px 0;
        }

        .hero-icon {
            width: 130px;
            height: 130px;
            margin: 0 auto 28px;
            background: linear-gradient(135deg, rgba(30,123,74,0.15), rgba(212,165,116,0.15));
            border: 4px solid var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            box-shadow: 0 16px 52px rgba(30,123,74,0.25), 0 0 70px rgba(30,123,74,0.15), inset 0 0 40px rgba(30,123,74,0.1);
            animation: floatHero 2.8s ease-in-out infinite;
            position: relative;
        }

        .hero-icon::before {
            content: '';
            position: absolute;
            inset: -12px;
            border-radius: 50%;
            border: 2px solid var(--primary-light);
            opacity: 0;
            animation: pulseRing 1.8s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .hero-icon::after {
            content: '';
            position: absolute;
            inset: -24px;
            border-radius: 50%;
            border: 1.5px solid var(--accent);
            opacity: 0;
            animation: pulseRing 2.2s cubic-bezier(0.4, 0, 0.6, 1) infinite 0.2s;
        }

        @keyframes floatHero {
            0%, 100% { transform: translateY(0) scale(1); }
            25% { transform: translateY(-15px) scale(1.02); }
            50% { transform: translateY(-22px) scale(1.04); }
            75% { transform: translateY(-12px) scale(1.02); }
        }

        @keyframes pulseRing {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.4; }
            100% { transform: scale(1.7); opacity: 0; }
        }

        .hero-title {
            font-size: 2.2rem;
            font-weight: 900;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
            animation: titleBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s backwards;
        }

        @keyframes titleBounce {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 0.98rem;
            max-width: 340px;
            margin: 0 auto;
            line-height: 1.7;
            animation: titleBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
        }

        .score-box {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            border-radius: var(--radius-sm);
            padding: 32px;
            margin: 32px 0;
            text-align: center;
            border: 2px solid var(--primary-light);
            box-shadow: 0 12px 40px rgba(30,123,74,0.25), inset 0 0 30px rgba(30,123,74,0.1);
            position: relative;
            overflow: hidden;
            color: white;
            animation: titleBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.4s backwards;
        }

        .score-box::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
            animation: slideGradient 3s infinite;
        }

        .score-box::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes slideGradient {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .score-label {
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 3.8rem;
            font-weight: 900;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 8px rgba(0,0,0,0.2);
            animation: scoreCounter 1.5s ease-out 0.6s backwards;
        }

        @keyframes scoreCounter {
            0% {
                opacity: 0;
                transform: scale(0) rotate(-180deg);
            }
            60% {
                transform: scale(1.2) rotate(10deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            font-family: var(--font);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: 0;
        }

        .btn:active::before {
            width: 500px;
            height: 500px;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 10px 32px rgba(30,123,74,0.35);
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-sm);
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.35) 50%, transparent 100%);
            animation: shimmerBtn 2s infinite;
        }

        @keyframes shimmerBtn {
            0% { transform: translateX(-150%); }
            100% { transform: translateX(150%); }
        }

        .btn-primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 14px 42px rgba(30,123,74,0.5);
        }

        .btn-primary:active {
            transform: translateY(0) scale(0.98);
            box-shadow: 0 6px 20px rgba(30,123,74,0.3);
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: #fff;
            box-shadow: 0 10px 32px rgba(212,165,116,0.35);
        }

        .btn-gold::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-sm);
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.35) 50%, transparent 100%);
            animation: shimmerBtn 2s infinite;
        }

        .btn-gold:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 14px 42px rgba(212,165,116,0.5);
        }

        .btn-gold:active {
            transform: translateY(0) scale(0.98);
        }

        .btn-outline {
            background: var(--surface);
            color: var(--text);
            border: 2px solid var(--border);
            box-shadow: var(--shadow);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 8px 24px rgba(30,123,74,0.2);
        }

        .btn-outline:active {
            transform: translateY(0) scale(0.98);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 12px;
        }

        .btn-ghost:hover {
            color: var(--primary);
            background: var(--bg-alt);
            border-radius: var(--radius-sm);
            transform: translateX(-4px);
        }

        .btn-ghost:active {
            transform: translateX(0) scale(0.98);
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .btn-group .btn {
            animation: btnAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .btn-group .btn:nth-child(1) { animation-delay: 0.5s; }
        .btn-group .btn:nth-child(2) { animation-delay: 0.6s; }
        .btn-group .btn:nth-child(3) { animation-delay: 0.7s; }

        @keyframes btnAppear {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .btn-icon {
            font-size: 1.3rem;
            animation: iconSpin 2s ease-in-out infinite;
        }

        @keyframes iconSpin {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(5deg) scale(1.1); }
        }

        .section-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            animation: titleBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .section-title span:first-child {
            font-size: 2rem;
            animation: iconBounce 1.5s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(10deg); }
        }

        .setting-group {
            margin-bottom: 28px;
            animation: settingSlide 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .setting-group:nth-child(2) { animation-delay: 0.1s; }
        .setting-group:nth-child(3) { animation-delay: 0.2s; }
        .setting-group:nth-child(4) { animation-delay: 0.3s; }

        @keyframes settingSlide {
            0% {
                opacity: 0;
                transform: translateX(-40px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .setting-label {
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-muted);
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-label::before {
            content: '';
            width: 5px;
            height: 20px;
            background: linear-gradient(180deg, var(--primary), var(--accent));
            border-radius: 3px;
            animation: barGrow 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes barGrow {
            0% {
                height: 0;
                opacity: 0;
            }
            100% {
                height: 20px;
                opacity: 1;
            }
        }

        .pills {
            display: flex;
            gap: 10px;
        }

        .pill {
            flex: 1;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .pill::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(30,123,74,0.3), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .pill:active::before {
            width: 300px;
            height: 300px;
        }

        .pill:hover {
            border-color: var(--primary-light);
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 20px rgba(30,123,74,0.2);
        }

        .pill.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-color: var(--primary);
            box-shadow: 0 8px 28px rgba(30,123,74,0.4);
            transform: scale(1.05);
            animation: pillSelect 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes pillSelect {
            0% { transform: scale(1) rotate(0deg); }
            40% { transform: scale(1.15) rotate(-5deg); }
            100% { transform: scale(1.05) rotate(0deg); }
        }

        .type-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .type-card {
            padding: 20px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .type-card::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(30,123,74,0.2), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .type-card:active::before {
            width: 400px;
            height: 400px;
        }

        .type-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 12px 32px rgba(30,123,74,0.25);
        }

        .type-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(30,123,74,0.08), rgba(212,165,116,0.04));
            box-shadow: 0 8px 28px rgba(30,123,74,0.3);
            animation: typeSelect 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes typeSelect {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(-4deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .type-icon {
            font-size: 2.2rem;
            margin-bottom: 12px;
            display: inline-block;
            animation: typeIconFloat 2s ease-in-out infinite;
        }

        @keyframes typeIconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .type-name {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 6px;
        }

        .type-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .juz-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            max-height: 260px;
            overflow-y: auto;
            padding: 6px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--bg-alt);
        }

        .juz-item {
            aspect-ratio: 1;
            border: 2px solid var(--border);
            border-radius: 14px;
            background: var(--surface);
            color: var(--text);
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .juz-item:hover {
            border-color: var(--primary);
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 24px rgba(30,123,74,0.3);
            z-index: 10;
        }

        .juz-item.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-color: var(--primary);
            box-shadow: 0 10px 32px rgba(30,123,74,0.45);
            animation: juzSelect 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes juzSelect {
            0% { transform: scale(1) rotate(0deg); }
            40% { transform: scale(1.3) rotate(-10deg); }
            70% { transform: scale(1.15) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .sheikh-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 14px;
        }

        .sheikh-card {
            padding: 18px 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .sheikh-card::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(30,123,74,0.2), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .sheikh-card:active::before {
            width: 300px;
            height: 300px;
        }

        .sheikh-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 8px 24px rgba(30,123,74,0.2);
        }

        .sheikh-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(30,123,74,0.08), rgba(212,165,116,0.04));
            box-shadow: 0 8px 28px rgba(30,123,74,0.3);
            animation: sheikhSelect 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes sheikhSelect {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); }
            100% { transform: scale(1); }
        }

        .sheikh-avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--bg-alt);
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .sheikh-card.active .sheikh-avatar {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 6px 20px rgba(30,123,74,0.4);
        }

        .sheikh-name {
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text);
        }

        .divider {
            display: flex;
            align-items: center;
            gap: 14px;
            margin: 22px 0;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .divider::before, .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        .quiz-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            animation: quizTopSlide 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes quizTopSlide {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-counter {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .quiz-badge {
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            padding: 10px 18px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 25px;
            box-shadow: 0 6px 16px rgba(30,123,74,0.25);
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .progress {
            height: 10px;
            background: var(--bg-alt);
            border-radius: 10px;
            margin-bottom: 24px;
            overflow: hidden;
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.1);
            animation: progressAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s backwards;
        }

        @keyframes progressAppear {
            0% {
                opacity: 0;
                transform: scaleX(0);
            }
            100% {
                opacity: 1;
                transform: scaleX(1);
            }
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary-light));
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmerProgress 2.5s infinite;
        }

        @keyframes shimmerProgress {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .question {
            text-align: center;
            margin-bottom: 20px;
            animation: questionSlide 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s backwards;
        }

        @keyframes questionSlide {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .question-text {
            font-size: 1.12rem;
            font-weight: 600;
            color: var(--text);
            line-height: 1.7;
        }

        .ayah-box {
            margin: 24px 0;
            padding: 30px 22px;
            background: linear-gradient(135deg, rgba(30,123,74,0.08), rgba(212,165,116,0.04));
            border-radius: var(--radius);
            border: 2px solid rgba(30,123,74,0.12);
            position: relative;
            overflow: hidden;
            animation: ayahAppear 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
        }

        @keyframes ayahAppear {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .ayah-box::before {
            content: '✦';
            position: absolute;
            top: 14px;
            right: 18px;
            font-size: 1.6rem;
            color: var(--primary-light);
            opacity: 0.4;
            animation: rotate 25s linear infinite;
        }

        .ayah-box::after {
            content: '✦';
            position: absolute;
            bottom: 14px;
            left: 18px;
            font-size: 1.4rem;
            color: var(--accent);
            opacity: 0.4;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .ayah-text {
            font-family: var(--font-quran);
            font-size: 2.1rem;
            line-height: 2.8;
            text-align: center;
            color: var(--text);
            direction: rtl;
            position: relative;
            z-index: 1;
        }

        .ayah-ref {
            text-align: center;
            margin-top: 16px;
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .audio-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            padding: 36px;
            margin: 24px 0;
            background: var(--bg-alt);
            border-radius: var(--radius);
            border: 2px solid var(--border);
            position: relative;
            overflow: hidden;
            animation: audioAppear 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
        }

        @keyframes audioAppear {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .audio-box::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, rgba(30,123,74,0.06) 0%, transparent 70%);
            animation: pulseBg 4.5s ease-in-out infinite;
        }

        @keyframes pulseBg {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .play-btn {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            font-size: 2.4rem;
            cursor: pointer;
            box-shadow: 0 14px 48px rgba(30,123,74,0.45), 0 0 80px rgba(30,123,74,0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .play-btn::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            border: 3px solid var(--primary-light);
            opacity: 0;
            animation: ringPulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .play-btn::after {
            content: '';
            position: absolute;
            inset: -16px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            opacity: 0;
            animation: ringPulse 1.3s cubic-bezier(0.4, 0, 0.6, 1) infinite 0.15s;
        }

        @keyframes ringPulse {
            0% { transform: scale(1); opacity: 1; }
            40% { transform: scale(1.2); opacity: 0.6; }
            100% { transform: scale(1.6); opacity: 0; }
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 18px 60px rgba(30,123,74,0.6), 0 0 100px rgba(30,123,74,0.3);
        }

        .play-btn:active {
            transform: scale(0.95);
            box-shadow: 0 8px 24px rgba(30,123,74,0.4);
        }

        .play-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            box-shadow: var(--shadow);
        }

        .play-btn.loading {
            animation: rotateSpin 1s linear infinite;
        }

        @keyframes rotateSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .audio-status {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 18px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 14px;
            position: relative;
            overflow: hidden;
            animation: optionSlide 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .option:nth-child(1) { animation-delay: 0.4s; }
        .option:nth-child(2) { animation-delay: 0.5s; }
        .option:nth-child(3) { animation-delay: 0.6s; }
        .option:nth-child(4) { animation-delay: 0.7s; }

        @keyframes optionSlide {
            0% {
                opacity: 0;
                transform: translateX(-60px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .option::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(30,123,74,0.2), transparent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .option:active::before {
            width: 500px;
            height: 500px;
        }

        .option:hover:not(.disabled) {
            border-color: var(--primary-light);
            transform: translateX(8px) scale(1.02);
            box-shadow: 0 8px 24px rgba(30,123,74,0.2);
        }

        .option-letter {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-alt), var(--bg));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-secondary);
            flex-shrink: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .option-text {
            flex: 1;
            font-weight: 500;
            font-size: 1rem;
            color: var(--text);
        }

        .option.arabic .option-text {
            font-family: var(--font-ar);
            font-size: 1.45rem;
            text-align: right;
            direction: rtl;
            line-height: 2;
        }

        .option.correct {
            background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.08));
            border-color: var(--success);
            animation: correctBounce 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .option.correct .option-letter {
            background: linear-gradient(135deg, var(--success), var(--primary));
            color: white;
            box-shadow: 0 6px 20px rgba(16,185,129,0.4);
            animation: correctSpin 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes correctBounce {
            0% { transform: scale(1); }
            30% { transform: scale(1.08) translateX(5px); }
            60% { transform: scale(1.05) translateX(-3px); }
            100% { transform: scale(1) translateX(0); }
        }

        @keyframes correctSpin {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.3) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .option.wrong {
            background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.08));
            border-color: var(--error);
            animation: wrongShake 0.6s;
        }

        .option.wrong .option-letter {
            background: linear-gradient(135deg, var(--error), #dc2626);
            color: white;
            box-shadow: 0 6px 20px rgba(239,68,68,0.4);
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-10px) rotate(-2deg); }
            20% { transform: translateX(10px) rotate(2deg); }
            30% { transform: translateX(-10px) rotate(-2deg); }
            40% { transform: translateX(10px) rotate(2deg); }
            50% { transform: translateX(-8px) rotate(-1deg); }
            60% { transform: translateX(8px) rotate(1deg); }
            70% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
            90% { transform: translateX(-2px); }
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.5;
        }

        .hikmat {
            margin-top: 28px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(212,165,116,0.15), rgba(212,165,116,0.08));
            border-radius: var(--radius-sm);
            border: 2px solid rgba(212,165,116,0.25);
            display: none;
            position: relative;
            overflow: hidden;
        }

        .hikmat::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        .hikmat.show {
            display: block;
            animation: hikmatExpand 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes hikmatExpand {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.85);
                max-height: 0;
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                max-height: 500px;
            }
        }

        .hikmat-title {
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--accent-dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .hikmat-text {
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .hikmat-source {
            margin-top: 12px;
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
            position: relative;
            z-index: 1;
        }

        .quiz-actions {
            display: flex;
            gap: 12px;
            margin-top: 28px;
        }

        .quiz-actions .btn {
            flex: 1;
        }

        .btn-next {
            display: none;
        }

        .btn-next.show {
            display: flex;
            animation: nextBtnPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes nextBtnPop {
            0% {
                opacity: 0;
                transform: scale(0) rotate(-180deg);
            }
            60% {
                transform: scale(1.15) rotate(10deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        .result {
            text-align: center;
            padding: 20px 0;
        }

        .result-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: resultScale 1.2s cubic-bezier(0.34, 1.56, 0.64, 1), floatResult 3.5s ease-in-out infinite 1.2s;
            box-shadow: var(--shadow-lg), var(--glow), 0 0 120px currentColor;
        }

        @keyframes resultScale {
            0% {
                transform: scale(0) rotate(-360deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.25) rotate(-180deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes floatResult {
            0%, 100% { transform: translateY(0) scale(1) rotate(0deg); }
            35% { transform: translateY(-20px) scale(1.05) rotate(3deg); }
            50% { transform: translateY(-25px) scale(1.08) rotate(-3deg); }
            65% { transform: translateY(-18px) scale(1.04) rotate(2deg); }
        }

        .result-circle::before {
            content: '';
            position: absolute;
            inset: -12px;
            border-radius: 50%;
            border: 3px dashed currentColor;
            opacity: 0.7;
            animation: rotateBorder 8s linear infinite;
        }

        .result-circle::after {
            content: '';
            position: absolute;
            inset: -24px;
            border-radius: 50%;
            border: 2px solid currentColor;
            opacity: 0.35;
            animation: rotateBorder 10s linear infinite reverse;
        }

        @keyframes rotateBorder {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.05); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .result-circle.excellent {
            background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06));
            color: var(--success);
            border: 5px solid var(--success);
        }

        .result-circle.good {
            background: linear-gradient(135deg, rgba(212,165,116,0.12), rgba(212,165,116,0.06));
            color: var(--accent);
            border: 5px solid var(--accent);
        }

        .result-circle.poor {
            background: linear-gradient(135deg, rgba(239,68,68,0.12), rgba(239,68,68,0.06));
            color: var(--error);
            border: 5px solid var(--error);
        }

        .result-score {
            font-size: 3.6rem;
            font-weight: 900;
            animation: scoreAppear 1s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
        }

        @keyframes scoreAppear {
            0% {
                transform: scale(0) rotate(-180deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
            }
        }

        .result-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 24px;
            animation: resultTitleSlide 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s backwards;
        }

        @keyframes resultTitleSlide {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
            margin-bottom: 26px;
        }

        .stat {
            padding: 20px;
            border-radius: var(--radius-sm);
            text-align: center;
            border: 2px solid var(--border);
            animation: statPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .stat:nth-child(1) { animation-delay: 0.7s; }
        .stat:nth-child(2) { animation-delay: 0.8s; }

        @keyframes statPop {
            0% {
                opacity: 0;
                transform: scale(0) rotate(180deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        .stat.success {
            background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06));
            border-color: var(--success);
        }

        .stat.error {
            background: linear-gradient(135deg, rgba(239,68,68,0.12), rgba(239,68,68,0.06));
            border-color: var(--error);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            animation: statValueCount 1.5s ease-out 0.9s backwards;
        }

        @keyframes statValueCount {
            0% {
                opacity: 0;
                transform: scale(2);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .stat.success .stat-value {
            color: var(--success);
        }

        .stat.error .stat-value {
            color: var(--error);
        }

        .stat-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .result-msg {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 28px;
            padding: 20px;
            background: var(--bg-alt);
            border-radius: var(--radius-sm);
            border-left: 5px solid var(--primary);
            animation: msgSlide 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.9s backwards;
        }

        @keyframes msgSlide {
            0% {
                opacity: 0;
                transform: translateX(-40px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .advice-list {
            list-style: none;
        }

        .advice-item {
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 18px;
            align-items: flex-start;
            animation: adviceSlide 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .advice-item:nth-child(1) { animation-delay: 0.1s; }
        .advice-item:nth-child(2) { animation-delay: 0.2s; }
        .advice-item:nth-child(3) { animation-delay: 0.3s; }
        .advice-item:nth-child(4) { animation-delay: 0.4s; }
        .advice-item:nth-child(5) { animation-delay: 0.5s; }

        @keyframes adviceSlide {
            0% {
                opacity: 0;
                transform: translateX(-50px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .advice-item:last-child {
            border-bottom: none;
        }

        .advice-icon {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, rgba(30,123,74,0.12), rgba(212,165,116,0.12));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            flex-shrink: 0;
            border: 2px solid var(--primary-light);
            animation: iconBounceAdvice 2s ease-in-out infinite;
        }

        @keyframes iconBounceAdvice {
            0%, 100% { transform: scale(1) translateY(0) rotate(0deg); }
            50% { transform: scale(1.15) translateY(-8px) rotate(10deg); }
        }

        .advice-content {
            flex: 1;
        }

        .advice-title {
            font-weight: 700;
            font-size: 1rem;
            color: var(--text);
            margin-bottom: 6px;
        }

        .advice-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .footer {
            margin-top: auto;
            padding: 28px 0;
            text-align: center;
            animation: footerFade 1s ease-out 0.5s backwards;
        }

        @keyframes footerFade {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        .footer-text {
            font-size: 0.85rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .footer-text b {
            color: var(--primary);
            font-weight: 700;
        }

        .loader-overlay {
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.96);
            backdrop-filter: blur(12px);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 24px;
            z-index: 1000;
        }

        [data-theme="dark"] .loader-overlay {
            background: rgba(15,20,25,0.96);
        }

        .loader-overlay.show {
            display: flex;
            animation: loaderFade 0.3s ease-out;
        }

        @keyframes loaderFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .loader-spinner {
            width: 70px;
            height: 70px;
            border: 5px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.9s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 1rem;
            animation: loaderPulse 1.5s ease-in-out infinite;
        }

        @keyframes loaderPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .hidden {
            display: none !important;
        }

        .mt-16 {
            margin-top: 16px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        @media (max-width: 400px) {
            .logo-text {
                font-size: 1.3rem;
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .ayah-text {
                font-size: 1.8rem;
            }

            .option.arabic .option-text {
                font-size: 1.25rem;
            }

            .juz-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .result-circle {
                width: 160px;
                height: 160px;
            }

            .result-score {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="bg"></div>
    <div class="pattern"></div>

    <div class="loader-overlay" id="loader">
        <div class="loader-spinner"></div>
        <div class="loader-text" id="loaderText">Yuklanmoqda...</div>
    </div>

    <div class="app">
        <header class="header">
            <div class="logo" onclick="App.go('home')">
                <div class="logo-icon">📖</div>
                <div class="logo-text">Qur'on<b>IQ</b></div>
            </div>
            <div class="header-actions">
                <select class="select-lang" id="langSelect" onchange="App.setLanguage(this.value)">
                    <option value="uz">O'zbek</option>
                    <option value="ar">العربية</option>
                    <option value="ru">Русский</option>
                    <option value="en">English</option>
                </select>
                <button class="btn-theme" id="themeBtn" onclick="App.toggleTheme()">🌙</button>
            </div>
        </header>

        <main id="pageHome" class="page active">
            <div class="card">
                <div class="hero">
                    <div class="hero-icon">📖</div>
                    <h1 class="hero-title" id="heroTitle">Xush kelibsiz!</h1>
                    <p class="hero-subtitle" id="heroSubtitle">Qur'on hifzini mustahkamlash va bilimingizni sinash uchun mukammal platforma</p>
                    <div class="score-box">
                        <div class="score-label" id="scoreLabel">Eng yuqori natija</div>
                        <div class="score-value" id="highScore">0%</div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="App.go('textSettings')">
                        <span class="btn-icon">📝</span>
                        <span id="btnText">Matnli test</span>
                    </button>
                    <button class="btn btn-gold" onclick="App.go('audioSettings')">
                        <span class="btn-icon">🎧</span>
                        <span id="btnAudio">Audio test</span>
                    </button>
                    <button class="btn btn-outline" onclick="App.go('advice')">
                        <span class="btn-icon">💡</span>
                        <span id="btnAdvice">Maslahatlar</span>
                    </button>
                </div>
            </div>
        </main>

        <section id="pageTextSettings" class="page">
            <div class="card">
                <h2 class="section-title"><span>📝</span> <span id="textSettingsTitle">Matnli test</span></h2>

                <div class="setting-group">
                    <div class="setting-label" id="labelType">Test turi</div>
                    <div class="type-grid">
                        <div class="type-card active" data-type="continue" onclick="App.setTextType('continue')">
                            <div class="type-icon">➡️</div>
                            <div class="type-name" id="typeContinue">Oyat davomi</div>
                            <div class="type-desc" id="typeContinueDesc">Keyingi oyatni toping</div>
                        </div>
                        <div class="type-card" data-type="surah" onclick="App.setTextType('surah')">
                            <div class="type-icon">🔍</div>
                            <div class="type-name" id="typeSurah">Surani toping</div>
                            <div class="type-desc" id="typeSurahDesc">Qaysi suradan</div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelDiff">Qiyinchilik darajasi</div>
                    <div class="pills">
                        <button class="pill" data-d="easy" onclick="App.setDiff('easy')" id="diffEasy">Oson</button>
                        <button class="pill active" data-d="medium" onclick="App.setDiff('medium')" id="diffMedium">O'rta</button>
                        <button class="pill" data-d="hard" onclick="App.setDiff('hard')" id="diffHard">Qiyin</button>
                    </div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelSource">Manba</div>
                    <button class="btn btn-primary" onclick="App.startQuiz('text')">
                        <span>📚</span>
                        <span id="btnFullQuran">30-juzdan boshlash</span>
                    </button>
                    <div class="divider" id="dividerOr">yoki juz tanlang</div>
                    <div class="juz-grid" id="juzGrid"></div>
                </div>

                <button class="btn btn-ghost mt-16" onclick="App.go('home')">
                    <span>←</span>
                    <span id="btnBack">Ortga</span>
                </button>
            </div>
        </section>

        <section id="pageAudioSettings" class="page">
            <div class="card">
                <h2 class="section-title"><span>🎧</span> <span id="audioSettingsTitle">Audio test</span></h2>

                <div class="setting-group">
                    <div class="setting-label" id="labelSheikh">Qori tanlang</div>
                    <div class="sheikh-grid" id="sheikhGrid"></div>
                </div>

                <div class="setting-group">
                    <div class="setting-label" id="labelAudioType">Test turi</div>
                    <div class="type-grid">
                        <div class="type-card active" data-atype="surah" onclick="App.setAudioType('surah')">
                            <div class="type-icon">🔍</div>
                            <div class="type-name" id="audioTypeSurah">Surani toping</div>
                            <div class="type-desc" id="audioTypeSurahDesc">Eshitib aniqlang</div>
                        </div>
                        <div class="type-card" data-atype="continue" onclick="App.setAudioType('continue')">
                            <div class="type-icon">➡️</div>
                            <div class="type-name" id="audioTypeContinue">Oyat davomi</div>
                            <div class="type-desc" id="audioTypeContinueDesc">Keyingisini toping</div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-gold mt-20" onclick="App.startQuiz('audio')">
                    <span>🎵</span>
                    <span id="btnStartAudio">Boshlash</span>
                </button>

                <button class="btn btn-ghost mt-16" onclick="App.go('home')">
                    <span>←</span>
                    <span id="btnBack2">Ortga</span>
                </button>
            </div>
        </section>

        <section id="pageQuiz" class="page">
            <div class="card">
                <div class="quiz-top">
                    <span class="quiz-counter" id="quizCounter">1 / 10</span>
                    <span class="quiz-badge" id="quizBadge">TEST</span>
                </div>

                <div class="progress">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>

                <div class="question">
                    <p class="question-text" id="questionText">Savol...</p>
                </div>

                <div class="ayah-box hidden" id="ayahBox">
                    <div class="ayah-text" id="ayahText"></div>
                    <div class="ayah-ref" id="ayahRef"></div>
                </div>
